(window.webpackJsonpApp=window.webpackJsonpApp||[]).push([[38],{"20TE":function(t,e,n){"use strict";var i={props:["modalId"],data:function(){return{isVisible:!1,loading:!0,balance:0,submit_loading:!1,anonymous:!1,data:{},private_message:"",selectedAward:null,awards:[]}},mounted:function(){var t=this;this.$bus.$on("command",function(e,n){t.modalId?e==t.modalId&&(t.$nextTick(t.fetchData),t.isVisible=!0,t.data=n):"give-award"==e&&(t.$nextTick(t.fetchData),t.isVisible=!0,t.data=n)})},watch:{isVisible:function(t){this.$emit("update:visible",t)}},methods:{fetchData:function(){var t=this;this.loading=!0,this.$http.Get("/v1/awards",{},function(e){t.awards=e.awards,t.balance=e.balance,t.selectedAward=t.awards[0],t.loading=!1})},submit:function(){var t=this;this.submit_loading=!0,this.$http.Post("/v1/awards/"+this.selectedAward.id,{ref_id:this.data.id,ref_type:this.data.type,ptype:this.data.ptype,pid:this.data.pid,anonymous:this.anonymous,private_message:this.private_message},function(e){t.private_message="",t.anonymous=!1,t.submit_loading=!1,t.$notify({offset:60,type:"success",message:"Award sent!"}),t.isVisible=!1})}}},a=n("KHd+"),o=Object(a.a)(i,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"mdl-modal"}},[n("el-dialog",{attrs:{visible:t.isVisible,title:"Awards",id:"awards-modal",width:"575px","append-to-body":!0},on:{"update:visible":function(e){t.isVisible=e}}},[n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[n("div",{staticClass:"awards-container"},[n("div",{staticClass:"awards"},t._l(t.awards,function(e){return n("div",{key:e.id,staticClass:"award-item",on:{click:function(n){t.selectedAward=e}}},[n("div",{staticClass:"award-info",class:{disabled:e.disabled,"is-active":t.selectedAward&&t.selectedAward.id==e.id}},[n("img",{attrs:{src:e.thumbnail}}),t._v(" "),n("div",{staticClass:"award-price"},[t._v(t._s(e.coins))])])])}),0)]),t._v(" "),n("div",{staticClass:"award-preview animated fadeIn",class:{disabled:t.selectedAward&&t.selectedAward.disabled}},[t.selectedAward?[n("div",{staticClass:"award-image"},[n("img",{attrs:{src:t.selectedAward.thumbnail}})]),t._v(" "),n("div",{staticClass:"award-info"},[n("div",{staticClass:"award-name"},[t._v(t._s(t.selectedAward.name))]),t._v(" "),n("p",[t._v(t._s(t.selectedAward.description))])]),t._v(" "),n("div",{staticClass:"award-price"},[n("i",{staticClass:"icon-gold"}),t._v(" "+t._s(t.selectedAward.coins))])]:t._e()],2),t._v(" "),n("div",{staticClass:"award-footer"},[n("div",{staticClass:"m-b-1"},[n("el-checkbox",{model:{value:t.anonymous,callback:function(e){t.anonymous=e},expression:"anonymous"}},[t._v("Make my gift anonymous")]),t._v(" "),n("el-input",{attrs:{type:"textarea",autosize:{minRows:2},placeholder:"Optional private message"},model:{value:t.private_message,callback:function(e){t.private_message=e},expression:"private_message"}})],1),t._v(" "),n("button",{directives:[{name:"loading",rawName:"v-loading",value:t.submit_loading,expression:"submit_loading"}],staticClass:"btn btn-primary",attrs:{disabled:t.selectedAward&&t.selectedAward.disabled},on:{click:t.submit}},[n("b",[t._v("Give Award")])]),t._v(" "),t.loading?t._e():n("div",{staticClass:"award-balance"},[n("a",{staticClass:"coins-info text-primary text-sm",attrs:{href:"/coins"}},[t._v("What are Coins?")]),t._v(" "),n("span",{staticClass:"balance"},[t._v("Balance: "+t._s(t._f("num_with_commas")(t.balance))+" "),n("i",{staticClass:"icon-gold"})])])])])])],1)},[],!1,null,null,null);e.a=o.exports},"8Tyq":function(t,e,n){t.exports=function(){"use strict";function t(e){"@babel/helpers - typeof";return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(){return(e=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}var n=4,i=.001,a=1e-7,o=10,s=11,r=1/(s-1),l="function"==typeof Float32Array;function c(t,e){return 1-3*e+3*t}function u(t,e){return 3*e-6*t}function d(t){return 3*t}function p(t,e,n){return((c(e,n)*t+u(e,n))*t+d(e))*t}function m(t,e,n){return 3*c(e,n)*t*t+2*u(e,n)*t+d(e)}function h(t){return t}var f=function(t,e,c,u){if(!(0<=t&&t<=1&&0<=c&&c<=1))throw new Error("bezier x values must be in [0, 1] range");if(t===e&&c===u)return h;for(var d=l?new Float32Array(s):new Array(s),f=0;f<s;++f)d[f]=p(f*r,t,c);function g(e){for(var l=0,u=1,h=s-1;u!==h&&d[u]<=e;++u)l+=r;var f=(e-d[--u])/(d[u+1]-d[u]),g=l+f*r,v=m(g,t,c);return v>=i?function(t,e,i,a){for(var o=0;o<n;++o){var s=m(e,i,a);if(0===s)return e;var r=p(e,i,a)-t;e-=r/s}return e}(e,g,t,c):0===v?g:function(t,e,n,i,s){var r,l,c=0;do{(r=p(l=e+(n-e)/2,i,s)-t)>0?n=l:e=l}while(Math.abs(r)>a&&++c<o);return l}(e,l,l+r,t,c)}return function(t){return 0===t?0:1===t?1:p(g(t),e,u)}},g={ease:[.25,.1,.25,1],linear:[0,0,1,1],"ease-in":[.42,0,1,1],"ease-out":[0,0,.58,1],"ease-in-out":[.42,0,.58,1]},v=!1;try{var _=Object.defineProperty({},"passive",{get:function(){v=!0}});window.addEventListener("test",null,_)}catch(t){}var y={$:function(t){return"string"!=typeof t?t:document.querySelector(t)},on:function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{passive:!1};e instanceof Array||(e=[e]);for(var a=0;a<e.length;a++)t.addEventListener(e[a],n,!!v&&i)},off:function(t,e,n){e instanceof Array||(e=[e]);for(var i=0;i<e.length;i++)t.removeEventListener(e[i],n)},cumulativeOffset:function(t){var e=0,n=0;do{e+=t.offsetTop||0,n+=t.offsetLeft||0,t=t.offsetParent}while(t);return{top:e,left:n}}},b=["mousedown","wheel","DOMMouseScroll","mousewheel","keyup","touchmove"],w={container:"body",duration:500,lazy:!0,easing:"ease",offset:0,force:!0,cancelable:!0,onStart:!1,onDone:!1,onCancel:!1,x:!1,y:!0};function C(t){w=e({},w,t)}var k=function(){var e,n,i,a,o,s,r,l,c,u,d,p,m,h,v,_,C,k,x,$,E,S,T,A,O,P,L,D=function(t){l&&(T=t,$=!0)};function I(){E=y.cumulativeOffset(n),S=y.cumulativeOffset(e),p&&(v=S.left-E.left+s,k=v-h),m&&(C=S.top-E.top+s,x=C-_)}function j(t){if($)return M();O||(O=t),o||I(),P=t-O,L=Math.min(P/i,1),L=A(L),N(n,_+x*L,h+k*L),P<i?window.requestAnimationFrame(j):M()}function M(){$||N(n,C,v),O=!1,y.off(n,b,D),$&&d&&d(T,e),!$&&u&&u(e)}function N(t,e,n){m&&(t.scrollTop=e),p&&(t.scrollLeft=n),"body"===t.tagName.toLowerCase()&&(m&&(document.documentElement.scrollTop=e),p&&(document.documentElement.scrollLeft=n))}return function(v,E){var S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("object"===t(E)?S=E:"number"==typeof E&&(S.duration=E),!(e=y.$(v)))return console.warn("[vue-scrollto warn]: Trying to scroll to an element that is not on the page: "+v);if(n=y.$(S.container||w.container),i=S.hasOwnProperty("duration")?S.duration:w.duration,o=S.hasOwnProperty("lazy")?S.lazy:w.lazy,a=S.easing||w.easing,s=S.hasOwnProperty("offset")?S.offset:w.offset,r=S.hasOwnProperty("force")?!1!==S.force:w.force,l=S.hasOwnProperty("cancelable")?!1!==S.cancelable:w.cancelable,c=S.onStart||w.onStart,u=S.onDone||w.onDone,d=S.onCancel||w.onCancel,p=void 0===S.x?w.x:S.x,m=void 0===S.y?w.y:S.y,"function"==typeof s&&(s=s(e,n)),h=function(t){var e=t.scrollLeft;return"body"===t.tagName.toLowerCase()&&(e=e||document.documentElement.scrollLeft),e}(n),_=function(t){var e=t.scrollTop;return"body"===t.tagName.toLowerCase()&&(e=e||document.documentElement.scrollTop),e}(n),I(),$=!1,!r){var O="body"===n.tagName.toLowerCase()?document.documentElement.clientHeight||window.innerHeight:n.offsetHeight,P=_,L=P+O,M=C-s,N=M+e.offsetHeight;if(M>=P&&N<=L)return void(u&&u(e))}if(c&&c(e),x||k)return"string"==typeof a&&(a=g[a]||g.ease),A=f.apply(f,a),y.on(n,b,D,{passive:!0}),window.requestAnimationFrame(j),function(){T=null,$=!0};u&&u(e)}},x=k(),$=[];function E(t){var e=function(t){for(var e=0;e<$.length;++e)if($[e].el===t)return $[e]}(t);return e||($.push(e={el:t,binding:{}}),e)}function S(t){var e=E(this).binding;if(e.value){if(t.preventDefault(),"string"==typeof e.value)return x(e.value);x(e.value.el||e.value.element,e.value)}}var T={bind:function(t,e){E(t).binding=e,y.on(t,"click",S)},unbind:function(t){!function(t){for(var e=0;e<$.length;++e)if($[e].el===t)return $.splice(e,1),!0}(t),y.off(t,"click",S)},update:function(t,e){E(t).binding=e}},A={bind:T.bind,unbind:T.unbind,update:T.update,beforeMount:T.bind,unmounted:T.unbind,updated:T.update,scrollTo:x,bindings:$},O=function(t,e){e&&C(e),t.directive("scroll-to",A);var n=t.config.globalProperties||t.prototype;n.$scrollTo=A.scrollTo};return"undefined"!=typeof window&&window.Vue&&(window.VueScrollTo=A,window.VueScrollTo.setDefaults=C,window.VueScrollTo.scroller=k,window.Vue.use&&window.Vue.use(O)),A.install=O,A}()},F2OI:function(t,e){},JYwv:function(t,e,n){"use strict";var i=n("yhnj"),a=n("QbLZ"),o=n.n(a),s={props:["comment"],data:function(){return{loading:!0,submit_loading:!1,data:{},edit:{}}},mounted:function(){this.edit=o()({},this.comment),this.fetchData()},methods:{saveChanges:function(){var t=this;this.submit_loading=!0;var e={message:this.data.raw_message,spoiler:this.data.spoiler};this.$emit("loading",!0),this.$http.Patch("/v1/users/comments/"+this.comment.id,e,function(e){t.submit_loading=!1,t.edit.message=e.message,t.edit.spoiler=e.spoiler,t.$emit("update:comment",t.edit),t.$emit("loading",!1),t.$emit("close")}).fail(function(){t.submit_loading=!1})},fetchData:function(){var t=this;this.$http.Get("/v1/users/comments/"+this.comment.id,function(e){t.loading=!1,t.data=e}).fail(function(){t.$emit("close")})}}},r=n("KHd+"),l=Object(r.a)(s,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[n("div",{staticClass:"feed-textarea"},[n("el-input",{attrs:{type:"textarea",autosize:{minRows:2}},model:{value:t.data.raw_message,callback:function(e){t.$set(t.data,"raw_message",e)},expression:"data.raw_message"}})],1),t._v(" "),n("div",{staticClass:"m-t clearfix"},[n("el-checkbox",{model:{value:t.data.spoiler,callback:function(e){t.$set(t.data,"spoiler",e)},expression:"data.spoiler"}},[t._v(t._s(t.$t("Spoiler")))]),t._v(" "),n("el-button",{staticClass:"btn pull-right",attrs:{loading:t.submit_loading,type:"primary",icon:"el-icon-edit"},on:{click:t.saveChanges}},[n("span",[t._v(t._s(t.$t("Save")))])])],1)])},[],!1,null,null,null).exports,c={props:["comment","id","type","parent_url","lang","logged_avatar","view_replies"],components:{ReplyForm:n("zhnJ").a,EditComment:l},data:function(){return{loading:!1,show_reveal:!1,visible_edit_dialog:!1,deleted:!1,options_loading:!1,liking:!1,options:[],reply_form:!1,item:{message:"",depth:1,spoiler:!1,reply_to:null,deleted:!1}}},mounted:function(){this.item.id=this.comment.id,this.item.message=this.comment.message,this.item.depth=this.comment.depth,this.item.reply_to=this.comment.reply_to,this.item.spoiler=this.comment.spoiler,this.item.deleted=this.comment.deleted},computed:{comment_url:function(){return void 0!==this.parent_url&&this.parent_url.length>0?this.parent_url+"#comment-"+this.comment.id:window.location.origin+window.location.pathname+"#comment-"+this.comment.id},children:{get:function(){return Array.isArray(this.comment.children)?this.comment.children:[]},set:function(t){this.comment.hasOwnProperty("children")||(this.comment.children=[]),this.comment.children.push(t)}},view_more_text:function(){return 1==this.comment.replies?this.$t("View {replies} reply").replace("{replies}",this.comment.replies):this.$t("View {replies} replies").replace("{replies}",this.comment.replies)}},methods:{scrollTo:function(t,e){t.preventDefault(),this.$scrollTo("#post-"+e,500,{container:"body",duration:500,easing:"ease",offset:-60,cancelable:!0,onStart:!1,onDone:!1,onCancel:!1,x:!1,y:!0})},toggleLoading:function(t){this.loading=t},addNewComment:function(t){for(var e=t.authors,n=t.roles,i=t.comments,a=0;a<i.length;a++){var o=i[a];e.hasOwnProperty(o.author)&&(o.author=e[o.author]),n.hasOwnProperty(o.role)&&(o.role=n[o.role]),this.children.push(o)}this.closeReplyForm(),this.$bus.$emit("update-count",t)},optionCommand:function(t,e){switch(e){case"edit":this.editComment(t);break;case"delete":this.deleteComment(t);break;case"report":this.$bus.$emit("command","report-comment",{id:this.item.id,type:"comment"})}},replyComment:function(t){this.reply_form=!this.reply_form},giveAward:function(){this.$bus.$emit("command","give-award",{id:this.item.id,type:"comment",ptype:this.type,pid:this.id})},closeReplyForm:function(){this.reply_form=!1},reveal:function(){this.show_reveal=!this.show_reveal},editComment:function(){this.visible_edit_dialog=!0},shareComment:function(t){t.preventDefault();var e=this.$createElement;this.$msgbox({title:"Share",message:e(i.a,{props:{url:this.comment_url}}),showCancelButton:!1,showConfirmButton:!1,beforeClose:function(t,e,n){n()}}).then(function(t){}).catch(function(){})},closeEditDialog:function(t){this.visible_edit_dialog=!1},deleteComment:function(){var t=this;this.$confirm(this.$t("Are you sure you want delete this comment?"),this.$t("Delete")).then(function(){t.loading=!0,t.$http.Delete("/v1/users/comments/"+t.comment.id,function(e){t.item.deleted=!0,t.loading=!1})}).catch(function(){})},likeComment:function(){var t=this;this.liking=!0,this.$http.Post("/v1/users/likes/"+this.comment.id,{type:"comment",liked:!this.comment.liked},function(e){t.comment.liked=e.liked,t.comment.likes=e.total,t.liking=!1}).fail(function(){t.liking=!1})},showReplies:function(t){this.$emit("load-more",t)},loadMenuOptions:function(){var t=this;this.options.length||this.options_loading||(this.options_loading=!0,this.$http.Get("/v1/users/actions",{type:"comment",id:this.comment.id},function(e){t.options_loading=!1,t.options=e.items}).fail(function(){t.options_loading=!1}))}}},u=Object(r.a)(c,function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.item.deleted&&t.children.length<=0?t._e():n("li",{class:["post comment",{highlight:t.comment.highlight}],attrs:{id:"post-"+t.item.id}},[t.comment.depth>1?n("div",{staticClass:"tl-container"},[t._m(0)]):t._e(),t._v(" "),n("div",{staticClass:"post-content"},[n("div",{staticClass:"avatar"},[t.item.deleted?n("b",{staticClass:"user"},[n("img",{staticClass:"user-avatar"})]):n("span",{staticClass:"user in-link"},[n("img",{staticClass:"user-avatar",attrs:{src:t.comment.author.avatar_url}})])]),t._v(" "),n("div",{staticClass:"post-body"},[n("div",{staticClass:"post-header p-b-xs"},[t.item.deleted?n("b",[t._v("["+t._s(t.$t("deleted"))+"]")]):n("a",{staticClass:"user-display text-primary in-link",attrs:{href:"/profile/"+t.comment.author.username,target:"_blank"}},[n("b",[t._v(t._s(t.comment.author.display_name))])]),t._v(" "),n("span",{staticClass:"mdl-utag"},[n("span",{staticClass:"mdl-btag"},[t.comment.author.verified?n("span",{staticClass:"mdl-verified",attrs:{title:"Verified Account"}}):t._e(),t._v(" "),t.comment.author.elite?n("span",{staticClass:"mdl-star",attrs:{title:"Star Member"}}):t._e()]),t._v(" "),t.comment.op?n("span",{staticClass:"op-tag"},[t._v("OP")]):t._e(),t._v(" "),t.comment.author.vip?n("span",{staticClass:"vip-tag"},[t._v("VIP")]):t._e(),t._v(" "),t.comment.role.name?n("span",{staticClass:"role-tag",style:{color:"#"+t.comment.role.color,borderColor:"#"+t.comment.role.color}},[t._v(t._s(t.comment.role.name))]):t._e()]),t._v(" "),n("span",{staticClass:"date"},[t._v(t._s(t._f("time_ago")(t.comment.date_added)))]),t._v(" "),t.comment.awards?n("span",{staticClass:"awards"},t._l(t.comment.awards,function(e){return n("span",{key:e.id,staticClass:"award-item"},[n("img",{staticClass:"award-img",attrs:{src:e.thumbnail,alt:e.name}}),e.total>1?[t._v(t._s(e.total))]:t._e()],2)}),0):t._e()]),t._v(" "),n("div",{staticClass:"post-message"},[t.item.spoiler?n("div",[t.item.reply_to?n("p",[n("a",{staticClass:"text-primary",attrs:{href:"#"},on:{click:function(e){return t.scrollTo(e,t.comment.reply_pid)}}},[t._v("@"+t._s(t.item.reply_to.display_name))])]):t._e(),t._v(" "),t.show_reveal?n("a",{staticClass:"btn btn-xs btn-spoiler reveal _active",on:{click:t.reveal}},[t._v(t._s(t.$t("Hide Spoiler")))]):n("a",{staticClass:"btn btn-xs btn-spoiler reveal",on:{click:t.reveal}},[t._v(t._s(t.$t("Reveal Spoiler")))]),t._v(" "),t.show_reveal?n("div",{staticClass:"spoiler p-a"},[n("p",{domProps:{innerHTML:t._s(t.item.message)}})]):t._e()]):t.item.deleted?n("p",[t._v("[deleted]")]):t.item.reply_to?n("p",[n("a",{staticClass:"text-primary",attrs:{href:"#"},on:{click:function(e){return t.scrollTo(e,t.comment.reply_pid)}}},[t._v("@"+t._s(t.item.reply_to.display_name))]),t._v(" "),n("span",{domProps:{innerHTML:t._s(t.item.message)}})]):n("p",{domProps:{innerHTML:t._s(t.item.message)}})]),t._v(" "),t.item.deleted?t._e():n("div",{staticClass:"post-actions"},[n("button",{class:["btn-like",{liked:t.comment.liked}],on:{click:t.likeComment}},[n("i",{staticClass:"like-heart",class:{"fa fa-spin loading":t.liking}}),t._v(" "+t._s(t.comment.likes)+"\n                ")]),t._v(" "),n("button",{staticClass:"action-reply",on:{click:t.replyComment}},[t._v(t._s(t.$t("Reply")))]),t._v(" "),t.logged_avatar&&!t.comment.is_author?n("button",{staticClass:"action-gift",on:{click:t.giveAward}}):t._e(),t._v(" "),n("div",{staticClass:"action-menu dropdown"},[n("button",{staticClass:"menu-toggle",attrs:{href:"#","data-toggle":"dropdown",rel:"nofollow"},on:{mouseenter:t.loadMenuOptions}}),t._v(" "),n("div",{staticClass:"dropdown-menu dropdown-menu-scale pull-right"},[t.options_loading?n("a",{staticClass:"dropdown-item"},[n("i",{staticClass:"fa fa-spinner fa-spin"})]):[n("a",{staticClass:"dropdown-item story-share",attrs:{href:"#"},on:{click:t.shareComment}},[t._v(t._s(t.$t("Share")))]),t._v(" "),t._l(t.options,function(e){return n("a",{key:e.value,class:["dropdown-item",e.icon],on:{click:function(n){return t.optionCommand(n,e.value)}}},[t._v(t._s(e.label))])})]],2)])]),t._v(" "),t.reply_form?n("div",{staticClass:"post-reply-form animated fadeIn"},[n("reply-form",{attrs:{logged_avatar:t.logged_avatar,pid:t.comment.id,id:t.id,type:t.type,lang:t.lang,showFooter:!0,showCancel:!0},on:{cancel:t.closeReplyForm,"new-comment":t.addNewComment}})],1):t._e(),t._v(" "),t.comment.replies>=1&&t.view_replies?n("div",[n("button",{staticClass:"view-replies",on:{click:t.showReplies}},[t._v(t._s(t.view_more_text))])]):t._e()])]),t._v(" "),t.children.length?n("ul",{staticClass:"children"},t._l(t.children,function(e){return n("comment",{key:e.id,attrs:{logged_avatar:t.logged_avatar,comment:e,id:t.id,lang:t.lang,parent_url:t.parent_url,type:t.type}})}),1):t._e(),t._v(" "),t.visible_edit_dialog?n("el-dialog",{attrs:{visible:t.visible_edit_dialog,title:t.$t("Edit Comment"),width:"640px","custom-class":"comment-editor","append-to-body":!0},on:{"update:visible":function(e){t.visible_edit_dialog=e}}},[n("edit-comment",{attrs:{comment:t.item},on:{"update:comment":function(e){t.item=e},close:t.closeEditDialog,loading:t.toggleLoading}})],1):t._e()],1)},[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tl-inner"},[e("i",{staticClass:"threadline"})])}],!1,null,null,null);e.a=u.exports},KGZe:function(t,e,n){"use strict";var i=n("QbLZ"),a=n.n(i),o=n("JYwv"),s=n("zhnJ"),r=n("20TE"),l=n("SPmy"),c=n.n(l),u=n("Ovn1"),d={props:["pid","ptype","title","isMobilePhone","logged_avatar","disabled_loading"],components:{Comment:o.a,CommentForm:s.a,ReportModal:u.a,GiveAwardModal:r.a},data:function(){return{comments:[],summary:[],awards:[],current_user:{},limit:50,total:0,has_more:!1,disabled:!1,visible_report_dialog:!1,report_data:{},more_loading:!1,loading:!0,page:1,init_switch:!1,current_lang:document.documentElement.lang,last_cid:0,activated:!1,sort_by:"recent"}},mounted:function(){var t=this,e=this;$(window).scroll(function(){$(window).scrollTop()+$(window).height()>$("#cmtsapp").offset().top-100&&(e.fetchData(),$(this).unbind())}).trigger("scroll"),this.$bus.$on("update-count",this.updateCount),this.$bus.$on("command",function(e,n){"report-comment"==e&&(t.visible_report_dialog=!0,t.report_data=n)})},watch:{activated:function(){this.cid_from_hash&&this.$scrollTo("#comment-top",500,{container:"body",duration:500,easing:"ease",offset:-60,cancelable:!0,onStart:!1,onDone:!1,onCancel:!1,x:!1,y:!0})}},computed:{logged:function(){return $(".header-user-avatar ").length},avatar_url:function(){return this.current_user?this.current_user.avatar_url:""},cid_from_hash:function(){if(!this.$route.hasOwnProperty("hash"))return 0;var t=this.$route.hash.split("#comment-");return t.length>=2?parseInt(t[1]):0},has_more_cmts:function(){return!(this.total<=this.limit)&&this.has_more},summary_sort:function(){return c()(this.summary,"total","desc")},summary_map:function(){return this.summary.reduce(function(t,e){return t[e.lang_iso]=e,t},{})},awards_map:function(){return this.awards.reduce(function(t,e){return t[e.id]=e,t},{})}},methods:{commentFormChange:function(){},pushNewComment:function(t){for(var e=this.processComments(t),n=0;n<e.length;n++)this.comments.unshift(e[n]);this.total=this.total+1},switchLang:function(t){t.lang_iso!=this.current_lang&&(this.current_lang=t.lang_iso,this.loading=!0,this.fetchData())},updateCount:function(t){this.total=this.total+1},processComments:function(t){var e=this,n=t.comments?t.comments:[],i=t.authors,o=t.roles;n.length&&(this.last_cid=n[n.length-1].id);var s=n.reduce(function(t,n){if(e.current_user&&(n.is_author=n.author==e.current_user.username),i.hasOwnProperty(n.author)&&(n.author=i[n.author]),o.hasOwnProperty(n.role)&&(n.role=o[n.role]),n.awards){var s=[];for(var r in n.awards)e.awards_map.hasOwnProperty(r)&&s.push(a()({},e.awards_map[r],{total:n.awards[r]}));n.awards=s}return n.id==e.cid_from_hash&&(n.highlight=!0),t[n.id]=n,t},{});return n.reduce(function(t,e){return e.parent_id<=0?t.push(e):s.hasOwnProperty(e.parent_id)&&(s[e.parent_id].hasOwnProperty("children")||(s[e.parent_id].children=[]),e.depth>3&&s[e.reply_pid]&&(e.reply_to={username:s[e.reply_pid].author.username,display_name:s[e.reply_pid].author.display_name}),s[e.parent_id].children.unshift(e)),t},[])},loadMore:function(){var t=this,e={t:this.pid,c:this.ptype,limit:this.limit,after:this.last_cid,page:this.page+1,sort:this.sort_by};this.more_loading=!0,this.$http.Get("/v1/threads?"+$.param(e),function(e){t.comments=t.comments.concat(t.processComments(e)),t.has_more=e.has_more,t.more_loading=!1,t.page++}).fail(function(){t.more_loading=!1})},fetchData:function(){var t=this,e={t:this.pid,c:this.ptype,limit:this.limit,lang:this.current_lang};this.cid_from_hash?e.start=this.cid_from_hash:e.sort=this.sort_by,this.$http.Get("/v1/threads?"+$.param(e),function(e){t.awards=e.awards,t.current_user=e.current_user,t.comments=t.processComments(e),t.total=e.total,t.summary=e.summary,t.loading=!1,t.activated=!0,t.has_more=e.has_more,t.disabled=e.disabled,t.current_lang=e.lang}).fail(function(){t.loading=!1})}}},p=n("KHd+"),m=Object(p.a)(d,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading&&!t.disabled_loading,expression:"loading && !disabled_loading"}],staticClass:"box comments-box post-comments",staticStyle:{"min-height":"100px"},attrs:{id:"cmtsapp",pid:t.pid,ptype:t.ptype,title:t.title}},[t.disabled?[n("div",{staticClass:"box-header b-b"},[n("h3",[t._v(t._s(t.$t("Comments")))])]),t._v(" "),t._m(0)]:[n("div",{staticClass:"box-header b-b"},[n("h3",[t._v(t._s(t.$t("Comments"))+" "),t.total&&t.activated?n("span",[t._v("("+t._s(t.total)+")")]):t._e()]),t._v(" "),t._m(1),t._v(" "),t.summary.length>0?n("div",{staticClass:"lang-switcher"},t._l(t.summary_sort,function(e){return e.language?n("span",{key:e.lang_iso,class:{active:e.lang_iso==t.current_lang},on:{click:function(n){return t.switchLang(e)}}},[t._v(t._s(t.$t(e.language))+" "),n("i",[t._v(t._s(e.total))])]):t._e()}),0):t._e()]),t._v(" "),t.logged?n("div",{staticClass:"box-body thread-post-form b-b"},[n("comment-form",{attrs:{id:t.pid,lang:t.current_lang,minsRows:2,type:t.ptype,logged_avatar:t.avatar_url},on:{change:t.commentFormChange,"new-comment":t.pushNewComment}})],1):n("div",{staticClass:"box-body b-b clear light"},[t._m(2)])],t._v(" "),t.comments.length?n("div",{staticClass:"box-body thread-post-form"},[n("ul",{staticClass:"post-list",attrs:{id:"comment-top"}},t._l(t.comments,function(e){return n("comment",{key:e.id,attrs:{comment:e,lang:t.current_lang,id:t.pid,type:t.ptype,logged_avatar:t.avatar_url}})}),1)]):t._e(),t._v(" "),t.has_more_cmts?n("div",{staticClass:"box-footer"},[n("el-button",{staticClass:"btn btn-block btn-default",attrs:{loading:t.more_loading},on:{click:t.loadMore}},[n("strong",[t._v("Load more comments")])])],1):t._e(),t._v(" "),n("give-award-modal"),t._v(" "),t.visible_report_dialog?n("report-modal",{attrs:{data:t.report_data,visible:t.visible_report_dialog},on:{"update:visible":function(e){t.visible_report_dialog=e}}}):t._e()],2)},[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"box-body text-center"},[e("p",{staticClass:"p-y"},[this._v("Comments are disabled for this content")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",{staticClass:"m-t"},[e("small",[this._v("MyDramaList is a space for respectful and thoughtful discussion. Harassment, hate speech, personal attacks, and inappropriate language are not allowed and may result in content removal or account action. Please keep things kind and civil.")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("a",{staticClass:"text-primary quick-login",attrs:{href:"/signin"}},[this._v("Login")]),this._v(" or "),e("a",{staticClass:"text-primary",attrs:{href:"/signup"}},[this._v("Register")]),this._v(" to post comments")])}],!1,null,null,null);e.a=m.exports},TrUB:function(t,e,n){var i=n("aYGk"),a={autoSetContainer:!1},o={install:function(t){t.prototype.$clipboardConfig=a,t.prototype.$copyText=function(t,e){return new Promise(function(n,a){var o=document.createElement("button"),s=new i(o,{text:function(){return t},action:function(){return"copy"},container:"object"==typeof e?e:document.body});s.on("success",function(t){s.destroy(),n(t)}),s.on("error",function(t){s.destroy(),a(t)}),o.click()})},t.directive("clipboard",{bind:function(t,e,n){if("success"===e.arg)t._v_clipboard_success=e.value;else if("error"===e.arg)t._v_clipboard_error=e.value;else{var o=new i(t,{text:function(){return e.value},action:function(){return"cut"===e.arg?"cut":"copy"},container:a.autoSetContainer?t:void 0});o.on("success",function(e){var n=t._v_clipboard_success;n&&n(e)}),o.on("error",function(e){var n=t._v_clipboard_error;n&&n(e)}),t._v_clipboard=o}},update:function(t,e){"success"===e.arg?t._v_clipboard_success=e.value:"error"===e.arg?t._v_clipboard_error=e.value:(t._v_clipboard.text=function(){return e.value},t._v_clipboard.action=function(){return"cut"===e.arg?"cut":"copy"})},unbind:function(t,e){"success"===e.arg?delete t._v_clipboard_success:"error"===e.arg?delete t._v_clipboard_error:(t._v_clipboard.destroy(),delete t._v_clipboard)}})},config:a};t.exports=o},WqHN:function(t,e,n){"use strict";var i=n("oCYn"),a=n("8606"),o=n.n(a),s=n("3zPb"),r=n.n(s),l=n("QQVE"),c=n.n(l),u=n("N4fY"),d=n.n(u),p=n("TkuN"),m=n.n(p),h=n("s1u7"),f=n.n(h),g=n("53J1"),v=n.n(g),_=n("SGzU"),y=n.n(_),b=n("5FBR"),w=n.n(b),C=n("s3Cy"),k=n.n(C),x=n("3vv1"),$=n.n(x),E=n("GP+6"),S=n.n(E),T=n("iWqV"),A=n.n(T),O=n("iak3"),P=n.n(O),L=n("7t/g"),D=n.n(L),I=n("hF+1"),j=n.n(I),M=n("3Nwd"),N=n.n(M),F=n("f8Hn"),H=n.n(F),R=n("btXN"),q=n.n(R),B=n("i7wE"),V=n.n(B),z=n("5fLb"),K=n.n(z),G=n("RD6U"),Y=n.n(G),U=n("9Y4X"),Z=n.n(U),J=n("TLIi"),Q=n.n(J),W=n("OAMw"),X=n.n(W),tt=n("cqqU"),et=n.n(tt),nt=n("3YfY"),it=n.n(nt),at=n("iFQK"),ot=n("EB6q"),st=n.n(ot),rt=n("asm4"),lt=n.n(rt),ct=n("9JSI"),ut=n.n(ct),dt=n("woQv"),pt=n.n(dt),mt=n("dGSn"),ht=n.n(mt),ft=n("lbBB"),gt=n.n(ft),vt=n("ZkC0"),_t=n.n(vt),yt=n("IM8Y"),bt=n.n(yt),wt=n("pMSX"),Ct=n.n(wt),kt=n("KZzr"),xt=n.n(kt),$t=n("wmP1"),Et=n.n($t),St=n("PpzQ"),Tt=n.n(St),At=n("lG44"),Ot=n.n(At),Pt=n("EJiy"),Lt=n.n(Pt),Dt=n("GQeE"),It=n.n(Dt),jt=n("m1cH"),Mt=n.n(jt),Nt={email:new RegExp(/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/),url:new RegExp(/^(https?|ftp|rmtp|mms):\/\/(([A-Z0-9][A-Z0-9_-]*)(\.[A-Z0-9][A-Z0-9_-]*)+)(:(\d+))?\/?/i),text:new RegExp(/^[a-zA-Z]+$/),digits:new RegExp(/^[\d() \.\:\-\+#]+$/),isodate:new RegExp(/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/)},Ft={name:"InputTag",props:{tags:{type:Array,default:function(){return[]}},placeholder:{type:String,default:""},readOnly:{type:Boolean,default:!1},validate:{type:String|Object,default:""},addTagOnKeys:{type:Array,default:function(){return[13,188,9]}},addTagOnBlur:{type:Boolean,default:!1},limit:{default:-1}},data:function(){return{newTag:"",innerTags:[].concat(Mt()(this.tags)),isInputActive:!1}},watch:{tags:function(){this.innerTags=[].concat(Mt()(this.tags))}},computed:{isLimit:function(){return this.limit>0&&Number(this.limit)===this.innerTags.length}},methods:{focusNewTag:function(){!this.readOnly&&this.$el.querySelector(".new-tag")&&this.$el.querySelector(".new-tag").focus()},handleInputFocus:function(){this.isInputActive=!0},handleInputBlur:function(t){this.isInputActive=!1,this.addNew(t)},addNew:function(t){t&&-1===this.addTagOnKeys.indexOf(t.keyCode)&&("blur"!==t.type||!this.addTagOnBlur)||this.isLimit||(t&&(t.stopPropagation(),t.preventDefault()),this.newTag&&-1===this.innerTags.indexOf(this.newTag)&&this.validateIfNeeded(this.newTag)&&(this.innerTags.push(this.newTag),this.newTag="",this.tagChange()))},validateIfNeeded:function(t){return""===this.validate||void 0===this.validate||("string"==typeof this.validate&&It()(Nt).indexOf(this.validate)>-1?Nt[this.validate].test(t):"object"!==Lt()(this.validate)||void 0===this.validate.test||this.validate.test(t))},remove:function(t){this.innerTags.splice(t,1),this.tagChange()},removeLastTag:function(){this.newTag||(this.innerTags.pop(),this.tagChange())},tagChange:function(){this.$emit("update:tags",this.innerTags)}}},Ht=(n("jibE"),n("KHd+")),Rt=Object(Ht.a)(Ft,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"mdl-input-tag-wrapper",class:{"read-only":t.readOnly,"mdl-input-tag-wrapper--active":t.isInputActive},on:{click:function(e){return t.focusNewTag()}}},[t._l(t.innerTags,function(e,i){return n("span",{key:i,staticClass:"input-tag"},[n("span",[t._v(t._s(e))]),t._v(" "),t.readOnly?t._e():n("i",{staticClass:"el-tag__close el-icon-close",on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.remove(i)}}})])}),t._v(" "),t.readOnly||t.isLimit?t._e():n("input",{directives:[{name:"model",rawName:"v-model",value:t.newTag,expression:"newTag"}],ref:"inputtag",staticClass:"new-tag",attrs:{placeholder:t.placeholder,type:"text"},domProps:{value:t.newTag},on:{keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"delete",[8,46],e.key,["Backspace","Delete","Del"])?null:(e.stopPropagation(),t.removeLastTag(e))},t.addNew],blur:t.handleInputBlur,focus:t.handleInputFocus,input:function(e){e.target.composing||(t.newTag=e.target.value)}}})],2)},[],!1,null,null,null).exports;i.default.component("input-tag",Rt),i.default.use(r.a),i.default.use(c.a),i.default.use(d.a),i.default.use(m.a),i.default.use(v.a),i.default.use(y.a),i.default.use(f.a),i.default.use(o.a),i.default.use(w.a),i.default.use(k.a),i.default.use($.a),i.default.use(S.a),i.default.use(A.a),i.default.use(P.a),i.default.use(at.a),i.default.use(D.a),i.default.use(j.a),i.default.use(N.a),i.default.use(Y.a),i.default.use(Z.a),i.default.use(Q.a),i.default.use(X.a),i.default.use(V.a),i.default.use(et.a),i.default.use(it.a),i.default.use(H.a),i.default.use(st.a),i.default.use(lt.a),i.default.use(ut.a),i.default.use(pt.a),i.default.use(ht.a),i.default.use(gt.a),i.default.use(_t.a),i.default.use(Et.a),i.default.use(Tt.a),i.default.use(Ot.a),i.default.use(bt.a),i.default.use(Ct.a),i.default.use(xt.a),i.default.prototype.$msgbox=q.a,i.default.prototype.$alert=q.a.alert,i.default.prototype.$confirm=q.a.confirm,i.default.prototype.$prompt=q.a.prompt,i.default.prototype.$notify=K.a},YuTi:function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},aYGk:function(t,e,n){t.exports=function(){return n={},t.m=e=[function(t,e){t.exports=function(t){var e;if("SELECT"===t.nodeName)t.focus(),e=t.value;else if("INPUT"===t.nodeName||"TEXTAREA"===t.nodeName){var n=t.hasAttribute("readonly");n||t.setAttribute("readonly",""),t.select(),t.setSelectionRange(0,t.value.length),n||t.removeAttribute("readonly"),e=t.value}else{t.hasAttribute("contenteditable")&&t.focus();var i=window.getSelection(),a=document.createRange();a.selectNodeContents(t),i.removeAllRanges(),i.addRange(a),e=i.toString()}return e}},function(t,e){function n(){}n.prototype={on:function(t,e,n){var i=this.e||(this.e={});return(i[t]||(i[t]=[])).push({fn:e,ctx:n}),this},once:function(t,e,n){var i=this;function a(){i.off(t,a),e.apply(n,arguments)}return a._=e,this.on(t,a,n)},emit:function(t){for(var e=[].slice.call(arguments,1),n=((this.e||(this.e={}))[t]||[]).slice(),i=0,a=n.length;i<a;i++)n[i].fn.apply(n[i].ctx,e);return this},off:function(t,e){var n=this.e||(this.e={}),i=n[t],a=[];if(i&&e)for(var o=0,s=i.length;o<s;o++)i[o].fn!==e&&i[o].fn._!==e&&a.push(i[o]);return a.length?n[t]=a:delete n[t],this}},t.exports=n,t.exports.TinyEmitter=n},function(t,e,n){var i=n(3),a=n(4);t.exports=function(t,e,n){if(!t&&!e&&!n)throw new Error("Missing required arguments");if(!i.string(e))throw new TypeError("Second argument must be a String");if(!i.fn(n))throw new TypeError("Third argument must be a Function");if(i.node(t))return p=e,m=n,(d=t).addEventListener(p,m),{destroy:function(){d.removeEventListener(p,m)}};if(i.nodeList(t))return l=t,c=e,u=n,Array.prototype.forEach.call(l,function(t){t.addEventListener(c,u)}),{destroy:function(){Array.prototype.forEach.call(l,function(t){t.removeEventListener(c,u)})}};if(i.string(t))return o=t,s=e,r=n,a(document.body,o,s,r);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList");var o,s,r,l,c,u,d,p,m}},function(t,e){e.node=function(t){return void 0!==t&&t instanceof HTMLElement&&1===t.nodeType},e.nodeList=function(t){var n=Object.prototype.toString.call(t);return void 0!==t&&("[object NodeList]"===n||"[object HTMLCollection]"===n)&&"length"in t&&(0===t.length||e.node(t[0]))},e.string=function(t){return"string"==typeof t||t instanceof String},e.fn=function(t){return"[object Function]"===Object.prototype.toString.call(t)}},function(t,e,n){var i=n(5);function a(t,e,n,a,o){var s=function(t,e,n,a){return function(n){n.delegateTarget=i(n.target,e),n.delegateTarget&&a.call(t,n)}}.apply(this,arguments);return t.addEventListener(n,s,o),{destroy:function(){t.removeEventListener(n,s,o)}}}t.exports=function(t,e,n,i,o){return"function"==typeof t.addEventListener?a.apply(null,arguments):"function"==typeof n?a.bind(null,document).apply(null,arguments):("string"==typeof t&&(t=document.querySelectorAll(t)),Array.prototype.map.call(t,function(t){return a(t,e,n,i,o)}))}},function(t,e){if("undefined"!=typeof Element&&!Element.prototype.matches){var n=Element.prototype;n.matches=n.matchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector||n.webkitMatchesSelector}t.exports=function(t,e){for(;t&&9!==t.nodeType;){if("function"==typeof t.matches&&t.matches(e))return t;t=t.parentNode}}},function(t,e,n){"use strict";n.r(e);var i=n(0),a=n.n(i),o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function s(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function r(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),this.resolveOptions(t),this.initSelection()}var l=(function(t,e,n){e&&s(t.prototype,e)}(r,[{key:"resolveOptions",value:function(t){var e=0<arguments.length&&void 0!==t?t:{};this.action=e.action,this.container=e.container,this.emitter=e.emitter,this.target=e.target,this.text=e.text,this.trigger=e.trigger,this.selectedText=""}},{key:"initSelection",value:function(){this.text?this.selectFake():this.target&&this.selectTarget()}},{key:"selectFake",value:function(){var t=this,e="rtl"==document.documentElement.getAttribute("dir");this.removeFake(),this.fakeHandlerCallback=function(){return t.removeFake()},this.fakeHandler=this.container.addEventListener("click",this.fakeHandlerCallback)||!0,this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style[e?"right":"left"]="-9999px";var n=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.style.top=n+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,this.container.appendChild(this.fakeElem),this.selectedText=a()(this.fakeElem),this.copyText()}},{key:"removeFake",value:function(){this.fakeHandler&&(this.container.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(this.container.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"selectTarget",value:function(){this.selectedText=a()(this.target),this.copyText()}},{key:"copyText",value:function(){var t=void 0;try{t=document.execCommand(this.action)}catch(e){t=!1}this.handleResult(t)}},{key:"handleResult",value:function(t){this.emitter.emit(t?"success":"error",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:"clearSelection",value:function(){this.trigger&&this.trigger.focus(),document.activeElement.blur(),window.getSelection().removeAllRanges()}},{key:"destroy",value:function(){this.removeFake()}},{key:"action",set:function(t){var e=0<arguments.length&&void 0!==t?t:"copy";if(this._action=e,"copy"!==this._action&&"cut"!==this._action)throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function(){return this._action}},{key:"target",set:function(t){if(void 0!==t){if(!t||"object"!==(void 0===t?"undefined":o(t))||1!==t.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===this.action&&t.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===this.action&&(t.hasAttribute("readonly")||t.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');this._target=t}},get:function(){return this._target}}]),r),c=n(1),u=n.n(c),d=n(2),p=n.n(d),m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function h(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var f=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(g,u.a),function(t,e,n){e&&h(t.prototype,e),n&&h(t,n)}(g,[{key:"resolveOptions",value:function(t){var e=0<arguments.length&&void 0!==t?t:{};this.action="function"==typeof e.action?e.action:this.defaultAction,this.target="function"==typeof e.target?e.target:this.defaultTarget,this.text="function"==typeof e.text?e.text:this.defaultText,this.container="object"===m(e.container)?e.container:document.body}},{key:"listenClick",value:function(t){var e=this;this.listener=p()(t,"click",function(t){return e.onClick(t)})}},{key:"onClick",value:function(t){var e=t.delegateTarget||t.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new l({action:this.action(e),target:this.target(e),text:this.text(e),container:this.container,trigger:e,emitter:this})}},{key:"defaultAction",value:function(t){return v("action",t)}},{key:"defaultTarget",value:function(t){var e=v("target",t);if(e)return document.querySelector(e)}},{key:"defaultText",value:function(t){return v("text",t)}},{key:"destroy",value:function(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)}}],[{key:"isSupported",value:function(t){var e=0<arguments.length&&void 0!==t?t:["copy","cut"],n="string"==typeof e?[e]:e,i=!!document.queryCommandSupported;return n.forEach(function(t){i=i&&!!document.queryCommandSupported(t)}),i}}]),g);function g(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,g);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(g.__proto__||Object.getPrototypeOf(g)).call(this));return n.resolveOptions(e),n.listenClick(t),n}function v(t,e){var n="data-clipboard-"+t;if(e.hasAttribute(n))return e.getAttribute(n)}e.default=f}],t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:i})},t.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(t.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var a in e)t.d(i,a,function(t){return e[t]}.bind(null,a));return i},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},t.p="",t(t.s=6).default;function t(i){if(n[i])return n[i].exports;var a=n[i]={i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var e,n}()},iFQK:function(t,e,n){"use strict";var i=n("DhVD"),a=n.n(i),o=n("8606"),s=n.n(o),r=n("QX/b"),l=n.n(r),c=n("6XTx"),u=n.n(c),d=n("0BDH"),p=n.n(d),m=n("FOnU"),h={components:{ElScrollbar:n.n(m).a},mixins:[u.a,p.a],componentName:"ElAutocompleteSuggestions",data:function(){return{parent:this.$parent,dropdownWidth:""}},props:{options:{default:function(){return{gpuAcceleration:!1}}},id:String},methods:{select:function(t){this.dispatch("ElAutocomplete","item-click",t)}},updated:function(){var t=this;this.$nextTick(function(e){t.popperJS&&t.updatePopper()})},mounted:function(){this.$parent.popperElm=this.popperElm=this.$el,this.referenceElm=this.$parent.$refs.input.$refs.input,this.referenceList=this.$el.querySelector(".el-autocomplete-suggestion__list"),this.referenceList.setAttribute("role","listbox"),this.referenceList.setAttribute("id",this.id)},created:function(){var t=this;this.$on("visible",function(e,n){t.dropdownWidth=n+"px",t.showPopper=e})}},f=n("KHd+"),g=Object(f.a)(h,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"el-zoom-in-top"},on:{"after-leave":t.doDestroy}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.showPopper,expression:"showPopper"}],staticClass:"el-autocomplete-suggestion el-popper",class:{"is-loading":!t.parent.hideLoading&&t.parent.loading},style:{width:t.dropdownWidth},attrs:{role:"region"}},[n("el-scrollbar",{attrs:{tag:"ul","wrap-class":"el-autocomplete-suggestion__wrap","view-class":"el-autocomplete-suggestion__list"}},[!t.parent.hideLoading&&t.parent.loading?n("li",[n("i",{staticClass:"el-icon-loading"})]):t._t("default",[t._t("no_results",[n("p",{staticClass:"el-select-dropdown__empty",staticStyle:{margin:"15px 15px 15px 0"}},[t._v("No match found")])])])],2)],1)])},[],!1,null,null,null).exports,v=n("K7XR"),_=n.n(v),y=n("gSIQ"),b=n("EvI9"),w=n.n(b),C={name:"ElAutocomplete",mixins:[p.a,w()("input"),_.a],componentName:"ElAutocomplete",components:{ElInput:s.a,ElAutocompleteSuggestions:g},directives:{Clickoutside:l.a},props:{valueKey:{type:String,default:"value"},popperClass:String,popperOptions:Object,placeholder:String,disabled:Boolean,name:String,size:String,value:String,maxlength:Number,minlength:{type:Number,default:3},autofocus:Boolean,showEmpty:Boolean,fetchSuggestions:Function,triggerOnFocus:{type:Boolean,default:!0},customItem:String,selectWhenUnmatched:{type:Boolean,default:!1},prefixIcon:String,suffixIcon:String,label:String,debounce:{type:Number,default:300},placement:{type:String,default:"bottom-start"},hideLoading:Boolean},data:function(){return{activated:!1,suggestions:[],queryString:"",loading:!1,noMatch:!1,highlightedIndex:-1,suggestionDisabled:!1}},computed:{suggestionVisible:function(){var t=this.suggestions;return(Array.isArray(t)&&t.length>0||this.loading||this.noMatch)&&this.activated},id:function(){return"el-autocomplete-"+Object(y.generateId)()}},watch:{suggestionVisible:function(t){this.broadcast("ElAutocompleteSuggestions","visible",[t,this.$refs.input.$refs.input.offsetWidth])}},methods:{getMigratingConfig:function(){return{props:{"custom-item":"custom-item is removed, use scoped slot instead.",props:"props is removed, use value-key instead."}}},getData:function(t){var e=this;if(!this.suggestionDisabled){if(void 0===t&&(t=this.queryString),this.minlength>t.length)return this.suggestions=[],this.queryString="",void(this.noMatch=!1);!1===this.showEmpty&&this.queryString==t||"string"!=typeof t||(this.loading=!0,this.noMatch=!0,this.fetchSuggestions(t,function(n){e.loading=!1,e.suggestionDisabled||(Array.isArray(n)?(e.noMatch=n.length<=0,e.suggestions=n,e.queryString=t):console.error("[Element Error][Autocomplete]autocomplete suggestions must be an array"))}))}},handleChange:function(t){if(this.$emit("input",t),this.suggestionDisabled=!1,!this.triggerOnFocus&&!t)return this.suggestionDisabled=!0,this.suggestions=[],this.queryString="",void(this.noMatch=!1);this.debouncedGetData(t)},handleFocus:function(t){this.activated=!0,this.$emit("focus",t),this.triggerOnFocus&&this.debouncedGetData(this.value)},handleBlur:function(t){this.$emit("blur",t)},close:function(t){this.activated=!1},handleKeyEnter:function(t){var e=this;this.suggestionVisible&&this.highlightedIndex>=0&&this.highlightedIndex<this.suggestions.length?(t.preventDefault(),this.select(this.suggestions[this.highlightedIndex])):this.selectWhenUnmatched&&(this.$emit("select",{value:this.value}),this.$nextTick(function(t){e.suggestions=[],e.queryString="",e.noMatch=!1,e.highlightedIndex=-1}))},select:function(t){var e=this;this.$emit("input",t[this.valueKey]),this.$emit("select",t),this.$nextTick(function(t){e.suggestions=[],e.queryString="",e.noMatch=!1,e.highlightedIndex=-1})},highlight:function(t){if(this.suggestionVisible&&!this.loading&&this.suggestions.length)if(t<0)this.highlightedIndex=-1;else{t>=this.suggestions.length&&(t=this.suggestions.length-1);var e=this.$refs.suggestions.$el.querySelector(".el-autocomplete-suggestion__wrap"),n=e.querySelectorAll(".el-autocomplete-suggestion__list li")[t],i=e.scrollTop,a=n.offsetTop;a+n.scrollHeight>i+e.clientHeight&&(e.scrollTop+=n.scrollHeight),a<i&&(e.scrollTop-=n.scrollHeight),this.highlightedIndex=t,this.$el.querySelector(".el-input__inner").setAttribute("aria-activedescendant",this.id+"-item-"+this.highlightedIndex)}}},mounted:function(){var t=this;this.debouncedGetData=a()(this.debounce,this.getData),this.$on("item-click",function(e){t.select(e)}),this.$on("reset",function(){t.$emit("input",""),t.suggestions=[],t.noMatch=!1});var e=this.$el.querySelector(".el-input__inner");e.setAttribute("role","textbox"),e.setAttribute("aria-autocomplete","list"),e.setAttribute("aria-controls","id"),e.setAttribute("aria-activedescendant",this.id+"-item-"+this.highlightedIndex)},beforeDestroy:function(){this.$refs.suggestions.$destroy()}},k=Object(f.a)(C,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:t.close,expression:"close"}],staticClass:"el-autocomplete",attrs:{"aria-haspopup":"listbox",role:"combobox","aria-expanded":t.suggestionVisible,"aria-owns":t.id}},[n("el-input",t._b({ref:"input",attrs:{label:t.label},on:{input:t.handleChange,focus:t.handleFocus,blur:t.handleBlur},nativeOn:{keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"up",38,e.key,["Up","ArrowUp"])?null:(e.preventDefault(),t.highlight(t.highlightedIndex-1))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"down",40,e.key,["Down","ArrowDown"])?null:(e.preventDefault(),t.highlight(t.highlightedIndex+1))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleKeyEnter(e)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"tab",9,e.key,"Tab")?null:t.close(e)}]}},"el-input",t.$props,!1),[t.$slots.prepend?n("template",{slot:"prepend"},[t._t("prepend")],2):t._e(),t._v(" "),t.$slots.append?n("template",{slot:"append"},[t._t("append")],2):t._e(),t._v(" "),t.$slots.prefix?n("template",{slot:"prefix"},[t._t("prefix")],2):t._e(),t._v(" "),t.$slots.suffix?n("template",{slot:"suffix"},[t._t("suffix")],2):t._e()],2),t._v(" "),n("el-autocomplete-suggestions",{ref:"suggestions",class:[t.popperClass?t.popperClass:""],attrs:{"visible-arrow":"","popper-options":t.popperOptions,placement:t.placement,id:t.id}},[t._l(t.suggestions,function(e,i){return n("li",{key:i,class:{highlighted:t.highlightedIndex===i},attrs:{id:t.id+"-item-"+i,role:"option","aria-selected":t.highlightedIndex===i},on:{click:function(n){return t.select(e)}}},[t._t("default",[t._v("\n        "+t._s(e[t.valueKey])+"\n      ")],{item:e})],2)}),t._v(" "),t.$slots.no_results?n("template",{slot:"no_results"},[t._t("no_results")],2):t._e()],2)],1)},[],!1,null,null,null).exports;k.install=function(t){t.component(k.name,k)};e.a=k},jibE:function(t,e,n){"use strict";n("F2OI")},kvrn:function(t,e){var n=/^(attrs|props|on|nativeOn|class|style|hook)$/;function i(t,e){return function(){t&&t.apply(this,arguments),e&&e.apply(this,arguments)}}t.exports=function(t){return t.reduce(function(t,e){var a,o,s,r,l;for(s in e)if(a=t[s],o=e[s],a&&n.test(s))if("class"===s&&("string"==typeof a&&(l=a,t[s]=a={},a[l]=!0),"string"==typeof o&&(l=o,e[s]=o={},o[l]=!0)),"on"===s||"nativeOn"===s||"hook"===s)for(r in o)a[r]=i(a[r],o[r]);else if(Array.isArray(a))t[s]=a.concat(o);else if(Array.isArray(o))t[s]=[a].concat(o);else for(r in o)a[r]=o[r];else t[s]=e[s];return t},{})}},zhnJ:function(t,e,n){"use strict";var i=n("14Xm"),a=n.n(i),o=n("D3Ub"),s=n.n(o),r=n("Al62"),l={props:{pid:"",id:String,type:String,lang:String,from:String,logged_avatar:String,minsRows:{type:Number,default:1},showCancel:Boolean,showFooter:Boolean},data:function(){return{tog_options:!1,submit_loading:!1,reply_message:"",reply_spoiler:!1}},mounted:function(){this.tog_options=this.showFooter},methods:{cancel:function(){this.$emit("cancel")},showCommentFooter:function(){this.tog_options=!0,this.$emit("change")},hideCommentFooter:function(){this.reply_message.length>0||(this.tog_options=!1,this.$emit("change"))},reset:function(){this.reply_message="",this.reply_spoiler=!1},submit:function(){var t=this;return s()(a.a.mark(function e(){var n,i;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.submit_loading=!0,n={message:t.reply_message,spoiler:t.reply_spoiler,url:window.location.pathname,t:t.id,c:t.type},""!=t.pid&&(n.parent_id=t.pid,n.reply_to=t.pid),e.next=5,Object(r.c)("create_comment");case 5:n.token=e.sent,i="/v1/users/comments",t.lang&&(i=i+"?lang="+t.lang),t.$http.Post(i,n,function(e){t.submit_loading=!1,t.reset(),t.$emit("new-comment",e)}).fail(function(){t.submit_loading=!1});case 10:case"end":return e.stop()}},e,t)}))()}}},c=n("KHd+"),u=Object(c.a)(l,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"post-form-body"},[n("div",{staticClass:"avatar"},[n("img",{staticClass:"user-avatar",attrs:{src:t.logged_avatar}})]),t._v(" "),n("div",{staticClass:"post-form-textarea"},[n("div",{staticClass:"form-group"},[n("el-input",{attrs:{type:"textarea",autosize:{minRows:t.minsRows},placeholder:t.$t("Post a comment")+"..."},on:{focus:t.showCommentFooter},model:{value:t.reply_message,callback:function(e){t.reply_message=e},expression:"reply_message"}})],1),t._v(" "),t.tog_options?n("div",{staticClass:"text-right post-form-footer"},[n("el-checkbox",{model:{value:t.reply_spoiler,callback:function(e){t.reply_spoiler=e},expression:"reply_spoiler"}},[t._v(t._s(t.$t("spoiler")))]),t._v(" "),n("el-button",{staticClass:"btn white m-l-sm",attrs:{size:"mini",loading:t.submit_loading},on:{click:t.submit}},[t._v(t._s(t.$t("Post")))]),t._v(" "),t.showCancel?n("a",{staticClass:"btn btn-sm btn-link btn-cancel",on:{click:t.cancel}},[t._v(t._s(t.$t("Cancel")))]):t._e()],1):t._e()])])},[],!1,null,null,null);e.a=u.exports},zxKb:function(t,e,n){"use strict";n.r(e);var i=n("EJiy"),a=n.n(i),o=n("oCYn"),s=n("a1Qh"),r=n("oLOV"),l=n("gfa5"),c=n("KGZe"),u=(n("WqHN"),n("TrUB")),d=n.n(u),p=n("8Tyq"),m=n.n(p),h=n("jE9Z"),f=n("Wgwc"),g=n.n(f),v=n("QgiU"),_=n.n(v),y=n("JYwv");g.a.extend(_.a),o.default.component("comment",y.a),o.default.use(m.a),o.default.use(h.a),o.default.use(d.a),o.default.prototype.$bus=l.a,o.default.prototype.$dayjs=g.a,o.default.prototype.$http=r.a,o.default.filter("capitalize",function(t){return t?(t=t.toString()).charAt(0).toUpperCase()+t.slice(1):""}),o.default.filter("time_ago",function(t){return g()(t).fromNow()}),o.default.filter("date_time",function(t){return g()(t).format("L")}),o.default.filter("nl2br",function(t){return(t+"").replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1<br>$2")});var b=new h.a({mode:"history"});new o.default({el:"#cmtsapp",i18n:s.a,router:b,template:"<App/>",render:function(t){var e="//i.mydramalist.com/letter/anon";void 0!==a()(window.user.avatar_url)&&(e=window.user.avatar_url);var n={isMobilePhone:window.isMobilePh,pid:this.$el.attributes.pid.value,ptype:this.$el.attributes.ptype.value,title:this.$el.attributes.title.value,logged_avatar:e};return t(c.a,{props:n})}})}}]);