/*! copyright 2025 Aditude, Inc - Prebid - production - Updated: 2025-10-21T22:41:14.971Z, v1.4.0, mydramalist-Ye4kEWLE9Z/mydramalist.com/prebid-load c6647730c5f9b02c38bf 8fb9f7df8e7badc3f82e */
!function(){var e={86964:function(e,t,r){e.exports=function(){"use strict";function e(e){return"function"==typeof e}var t,i,s,n,o=void 0,a=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},l=0,d=void 0,u=void 0,h=function(e,t){y[l]=e,y[l+1]=t,2===(l+=2)&&(u?u(w):v())},c="undefined"!=typeof window?window:void 0,p=c||{},f=p.MutationObserver||p.WebKitMutationObserver,g="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"===({}).toString.call(process),m="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function b(){var e=setTimeout;return function(){return e(w,1)}}var y=Array(1e3);function w(){for(var e=0;e<l;e+=2)(0,y[e])(y[e+1]),y[e]=void 0,y[e+1]=void 0;l=0}var v=void 0;function _(e,t){var r=this,i=new this.constructor(T);void 0===i[R]&&$(i);var s=r._state;if(s){var n=arguments[s-1];h(function(){return I(s,i,n,r._result)})}else k(r,i,e,t);return i}function E(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=new this(T);return C(t,e),t}g?v=function(){return process.nextTick(w)}:f?(t=0,i=new f(w),s=document.createTextNode(""),i.observe(s,{characterData:!0}),v=function(){s.data=t=++t%2}):m?((n=new MessageChannel).port1.onmessage=w,v=function(){return n.port2.postMessage(0)}):v=void 0===c?function(){try{var e=Function("return this")().require("vertx");return d=e.runOnLoop||e.runOnContext,void 0!==d?function(){d(w)}:b()}catch(e){return b()}}():b();var R=Math.random().toString(36).substring(2);function T(){}var L=void 0;function S(t,r,i){r.constructor===t.constructor&&i===_&&r.constructor.resolve===E?1===r._state?P(t,r._result):2===r._state?x(t,r._result):k(r,void 0,function(e){return C(t,e)},function(e){return x(t,e)}):void 0===i?P(t,r):e(i)?h(function(e){var t=!1,s=function(e,t,r,i){try{e.call(t,r,i)}catch(e){return e}}(i,r,function(i){t||(t=!0,r!==i?C(e,i):P(e,i))},function(r){t||(t=!0,x(e,r))},"Settle: "+(e._label||" unknown promise"));!t&&s&&(t=!0,x(e,s))},t):P(t,r)}function C(e,t){if(e===t)x(e,TypeError("You cannot resolve a promise with itself"));else if(r=typeof t,null!==t&&("object"===r||"function"===r)){var r,i=void 0;try{i=t.then}catch(t){x(e,t);return}S(e,t,i)}else P(e,t)}function A(e){e._onerror&&e._onerror(e._result),j(e)}function P(e,t){e._state===L&&(e._result=t,e._state=1,0!==e._subscribers.length&&h(j,e))}function x(e,t){e._state===L&&(e._state=2,e._result=t,h(A,e))}function k(e,t,r,i){var s=e._subscribers,n=s.length;e._onerror=null,s[n]=t,s[n+1]=r,s[n+2]=i,0===n&&e._state&&h(j,e)}function j(e){var t=e._subscribers,r=e._state;if(0!==t.length){for(var i=void 0,s=void 0,n=e._result,o=0;o<t.length;o+=3)i=t[o],s=t[o+r],i?I(r,i,s,n):s(n);e._subscribers.length=0}}function I(t,r,i,s){var n=e(i),o=void 0,a=void 0,l=!0;if(n){try{o=i(s)}catch(e){l=!1,a=e}if(r===o)return void x(r,TypeError("A promises callback cannot return that same promise."))}else o=s;r._state!==L||(n&&l?C(r,o):!1===l?x(r,a):1===t?P(r,o):2===t&&x(r,o))}var D=0;function $(e){e[R]=D++,e._state=void 0,e._result=void 0,e._subscribers=[]}var q=function(){function e(e,t){this._instanceConstructor=e,this.promise=new e(T),this.promise[R]||$(this.promise),a(t)?(this.length=t.length,this._remaining=t.length,this._result=Array(this.length),0===this.length?P(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&P(this.promise,this._result))):x(this.promise,Error("Array Methods must be provided an Array"))}return e.prototype._enumerate=function(e){for(var t=0;this._state===L&&t<e.length;t++)this._eachEntry(e[t],t)},e.prototype._eachEntry=function(e,t){var r=this._instanceConstructor,i=r.resolve;if(i===E){var s=void 0,n=void 0,o=!1;try{s=e.then}catch(e){o=!0,n=e}if(s===_&&e._state!==L)this._settledAt(e._state,t,e._result);else if("function"!=typeof s)this._remaining--,this._result[t]=e;else if(r===N){var a=new r(T);o?x(a,n):S(a,e,s),this._willSettleAt(a,t)}else this._willSettleAt(new r(function(t){return t(e)}),t)}else this._willSettleAt(i(e),t)},e.prototype._settledAt=function(e,t,r){var i=this.promise;i._state===L&&(this._remaining--,2===e?x(i,r):this._result[t]=r),0===this._remaining&&P(i,this._result)},e.prototype._willSettleAt=function(e,t){var r=this;k(e,void 0,function(e){return r._settledAt(1,t,e)},function(e){return r._settledAt(2,t,e)})},e}(),N=function(){function t(e){this[R]=D++,this._result=this._state=void 0,this._subscribers=[],T!==e&&("function"!=typeof e&&function(){throw TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof t?function(e,t){try{t(function(t){C(e,t)},function(t){x(e,t)})}catch(t){x(e,t)}}(this,e):function(){throw TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return t.prototype.catch=function(e){return this.then(null,e)},t.prototype.finally=function(t){var r=this.constructor;return e(t)?this.then(function(e){return r.resolve(t()).then(function(){return e})},function(e){return r.resolve(t()).then(function(){throw e})}):this.then(t,t)},t}();return N.prototype.then=_,N.all=function(e){return new q(this,e).promise},N.race=function(e){var t=this;return new t(a(e)?function(r,i){for(var s=e.length,n=0;n<s;n++)t.resolve(e[n]).then(r,i)}:function(e,t){return t(TypeError("You must pass an array to race."))})},N.resolve=E,N.reject=function(e){var t=new this(T);return x(t,e),t},N._setScheduler=function(e){u=e},N._setAsap=function(e){h=e},N._asap=h,N.polyfill=function(){var e=void 0;if(void 0!==r.g)e=r.g;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var i=null;try{i=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===i&&!t.cast)return}e.Promise=N},N.Promise=N,N}()}},t={};function r(i){var s=t[i];if(void 0!==s)return s.exports;var n=t[i]={exports:{}};return e[i].call(n.exports,n,n.exports,r),n.exports}r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(e){if("object"==typeof window)return window}}(),function(){"use strict";let e,t,i;var s,n,o=(e,t,r=!1,i=!1,s=[],n=[])=>{let o=document.createElement("script");o.async=r,i&&(o.defer=!0),s.forEach(e=>{o.setAttribute("data-"+e.key,e.value)}),n.forEach(e=>{o.setAttribute(e.key,e.value)}),o.src=e,document[t].appendChild(o)},a=((s=a||{}).Head="head",s);/*! js-cookie v3.0.5 | MIT */function l(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)e[i]=r[i]}return e}var d=function e(t,r){function i(e,i,s){if("undefined"!=typeof document){"number"==typeof(s=l({},r,s)).expires&&(s.expires=new Date(Date.now()+864e5*s.expires)),s.expires&&(s.expires=s.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var n="";for(var o in s)s[o]&&(n+="; "+o,!0!==s[o]&&(n+="="+s[o].split(";")[0]));return document.cookie=e+"="+t.write(i,e)+n}}return Object.create({set:i,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var r=document.cookie?document.cookie.split("; "):[],i={},s=0;s<r.length;s++){var n=r[s].split("="),o=n.slice(1).join("=");try{var a=decodeURIComponent(n[0]);if(i[a]=t.read(o,a),e===a)break}catch(e){}}return e?i[e]:i}},remove:function(e,t){i(e,"",l({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,l({},this.attributes,t))},withConverter:function(t){return e(l({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(r)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"});let u=e=>d.get(e)||!1,h=e=>{let t=window.location.search.match("[?&]"+e+"(?:&|$|=([^&]*))");return t?t[1]?decodeURIComponent(t[1]):"":null},c=e=>{let t=window.location.hash.match("[#&]"+e+"(?:&|$|=([^&]*))");return t?t[1]?decodeURIComponent(t[1]):"":null};function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}let f="#339933";var g=((n=g||{})[n.Advanced=0]="Advanced",n[n.None=1]="None",n[n.Standard=2]="Standard",n);let m=1,b=u("aditude_debug")||h("aditude_debug")||c("aditude_debug");b&&(m=2*("99"!=b));class y{setLabel(e,t=f){return this.label={text:e,color:t},this}tag(e,t="black"){return this.tempTag={text:e,color:t},this}clearTag(){this.tempTag=null}enable(e=2){return this.setLevel(e),this}setLevel(e){return this.level=e,this}isAdvanced(){return 0===this.level}isEnabled(){return 1!==this.level}advancedLog(...e){this.isAdvanced()&&this._sendLog("log",this._decorate(e,""))}log(...e){this.isEnabled()&&this._sendLog("log",this._decorate(e,""))}warn(...e){this.isEnabled()&&this._sendLog("warn",this._decorate(e,""))}error(...e){this._sendLog("error",this._decorate(e,""))}table(e=Array,t=null){this.isEnabled()&&console.table(e,t)}group(e,t){this.isEnabled()&&(console.group(e),t(this),console.groupEnd(),this.clearTag())}_sendLog(e,t){let r=[e,"log","debug","info"].find(e=>String(console[e])===`function ${e}() { [native code] }`)||e;console[r](...t)}_getElapsedTime(){if(!y.firstLogTime)return y.firstLogTime=Date.now(),"0ms";let e=Date.now()-y.firstLogTime;return`${e}ms`}_decorate(e,t=""){e=[].slice.call(e),t&&e.unshift(t);let r=[],i=[];if(this.isAdvanced()){let e=this._getElapsedTime();r.push(`%c[${e}]`),i.push("background: grey; color: white; font-size: 9px; padding: 1px 4px; border-radius: 0; margin-right: 1px;")}return r.push("%cCW"),i.push(s("#61B321")),this.label&&this.label.text.length>0&&(r.push("%c"+this.label.text),i.push(s(this.label.color))),this.tempTag&&(r.push("%c"+this.tempTag.text),i.push(s(this.tempTag.color))),e.unshift(...i),e.unshift(r.join("")),e;function s(e){return`display: inline-block; color: #fff; font-size: 9px; background: ${e}; padding: 1px 4px; border-radius: 0; margin-right: 1px;`}}constructor(e){p(this,"labelColor",void 0),p(this,"label",{text:"",color:f}),p(this,"level",m),p(this,"namespace",void 0),p(this,"tempTag",void 0),this.namespace=e}}p(y,"firstLogTime",null);let w={};var v=function(e="default"){return w[e]||(w[e]=new y(e)),w[e]};let _=v("analytics").setLabel("Analytics"),E=new class{get isDisabled(){return"boolean"==typeof window.__RAVEN_ENABLED&&!1===window.__RAVEN_ENABLED}disableTracking(){window.__RAVEN_ENABLED=!1}getGlobal(){return window.Raven=window.Raven||{cmd:[]},window.Raven.cmd=window.Raven.cmd||[],window.Raven}setCustomParams(e){this.push(({config:t})=>{_.log("sending custom param",e),t.setCustom(e)})}setTudeMeta(e){this.push(({config:t})=>{t.setTudeMeta(e)})}recordPageview(){this.push(({events:e})=>{e.pageview()})}recordCustomEvent(e,t){this.push(({events:r})=>{r.sendCustomEvent(e,t)})}recordEvent(e,t){this.push(({events:r})=>{r.send(e,t)})}constructor(){var e,t;e="push",t=e=>{this.isDisabled||this.getGlobal().cmd.push(e)},e in this?Object.defineProperty(this,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):this[e]=t}};window.Raven=window.Raven||{cmd:[]};let R=v("analytics").setLabel("Analytics"),T=async()=>{E.disableTracking()},L=e=>{E.setCustomParams(e)};(async e=>{if(e.disableTrackingExplicitly)return R.log("Tracking explicitly disabled");let{raven:t="standalone"}=e,r="none",i=r&&["standalone","legacy"].includes(r)?r:t;if("legacy"===i){let t=`${e.publisherKeyCw}/${e.wrapper}`,r=new URL(`https://edge.aditude.io/wrapper/${t}/info.json`);try{let e=await fetch(r.toString());if(e.ok){let{p:t,a:r}=await e.json();t&&r||(v().advancedLog("publisher not configured for analytics"),T())}else throw Error(`${e.status} ${e.statusText}`)}catch(e){v().error("analytics config failed to load",e)}}else if("standalone"===i){if(!e.propertyId||""===e.propertyId||window.RavenLoaded)return;let{pbjsGlobals:t,propertyId:r,wrapper:i}=e;window.__RAVEN_ENABLED=!0,window.RavenLoaded=!0,window.Raven=window.Raven||{cmd:[]},window.Raven.initialConfig={globalParams:{wrapper:i},pbjsGlobals:t||["pbjs"],propertyId:r},o(`https://raven-edge.aditude.io/raven/${r}/library.js`,a.Head,!1,!1)}})({publisherKeyCw:"mydramalist-Ye4kEWLE9Z",propertyId:"daebakmedia-main-YeEWL",wrapper:"mydramalist.com"});var S="fc069512118ac3cd8cd483bd4913b664";class C extends Error{response;request;options;constructor(e,t,r){let i=e.status||0===e.status?e.status:"",s=e.statusText||"",n=`${i} ${s}`.trim();super(`Request failed with ${n?`status code ${n}`:"an unknown error"}: ${t.method} ${t.url}`),this.name="HTTPError",this.response=e,this.request=t,this.options=r}}class A extends Error{request;constructor(e){super(`Request timed out: ${e.method} ${e.url}`),this.name="TimeoutError",this.request=e}}let P=(()=>{let e=!1,t=!1,r="function"==typeof globalThis.Request;if("function"==typeof globalThis.ReadableStream&&r)try{t=new globalThis.Request("https://empty.invalid",{body:new globalThis.ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type")}catch(e){if(e instanceof Error&&"unsupported BodyInit type"===e.message)return!1;throw e}return e&&!t})(),x="function"==typeof globalThis.AbortController,k="function"==typeof globalThis.ReadableStream,j="function"==typeof globalThis.FormData,I=["get","post","put","patch","head","delete"],D={json:"application/json",text:"text/*",formData:"multipart/form-data",arrayBuffer:"*/*",blob:"*/*"},$=new TextEncoder().encode("------WebKitFormBoundaryaxpyiPgbbPti10Rw").length,q=Symbol("stop"),N={json:!0,parseJson:!0,stringifyJson:!0,searchParams:!0,prefixUrl:!0,retry:!0,timeout:!0,hooks:!0,throwHttpErrors:!0,onDownloadProgress:!0,onUploadProgress:!0,fetch:!0},O={method:!0,headers:!0,body:!0,mode:!0,credentials:!0,cache:!0,redirect:!0,referrer:!0,referrerPolicy:!0,integrity:!0,keepalive:!0,signal:!0,window:!0,dispatcher:!0,duplex:!0,priority:!0},U=e=>{if(!e)return 0;if(e instanceof FormData){let t=0;for(let[r,i]of e)t+=$,t+=new TextEncoder().encode(`Content-Disposition: form-data; name="${r}"`).length,t+="string"==typeof i?new TextEncoder().encode(i).length:i.size;return t}if(e instanceof Blob)return e.size;if(e instanceof ArrayBuffer)return e.byteLength;if("string"==typeof e)return new TextEncoder().encode(e).length;if(e instanceof URLSearchParams)return new TextEncoder().encode(e.toString()).length;if("byteLength"in e)return e.byteLength;if("object"==typeof e&&null!==e)try{let t=JSON.stringify(e);return new TextEncoder().encode(t).length}catch{}return 0},G=(e,t)=>{let r=Number(e.headers.get("content-length"))||0,i=0;return 204===e.status?(t&&t({percent:1,totalBytes:r,transferredBytes:i},new Uint8Array),new Response(null,{status:e.status,statusText:e.statusText,headers:e.headers})):new Response(new ReadableStream({async start(s){let n=e.body.getReader();async function o(){let{done:e,value:a}=await n.read();if(e)return void s.close();t&&(i+=a.byteLength,t({percent:0===r?0:i/r,transferredBytes:i,totalBytes:r},a)),s.enqueue(a),await o()}t&&t({percent:0,transferredBytes:0,totalBytes:r},new Uint8Array),await o()}}),{status:e.status,statusText:e.statusText,headers:e.headers})},M=(e,t)=>{let r=U(e.body),i=0;return new Request(e,{duplex:"half",body:new ReadableStream({async start(s){let n=e.body instanceof ReadableStream?e.body.getReader():new Response("").body.getReader();async function o(){let{done:e,value:a}=await n.read();if(e){t&&t({percent:1,transferredBytes:i,totalBytes:Math.max(r,i)},new Uint8Array),s.close();return}i+=a.byteLength;let l=0===r?0:i/r;(r<i||1===l)&&(l=.99),t&&t({percent:Number(l.toFixed(2)),transferredBytes:i,totalBytes:r},a),s.enqueue(a),await o()}await o()}})})},F=e=>null!==e&&"object"==typeof e,B=(...e)=>{for(let t of e)if((!F(t)||Array.isArray(t))&&void 0!==t)throw TypeError("The `options` argument must be an object");return K({},...e)},H=(e={},t={})=>{let r=new globalThis.Headers(e),i=t instanceof globalThis.Headers;for(let[e,s]of new globalThis.Headers(t).entries())i&&"undefined"===s||void 0===s?r.delete(e):r.set(e,s);return r};function W(e,t,r){return Object.hasOwn(t,r)&&void 0===t[r]?[]:K(e[r]??[],t[r]??[])}let z=(e={},t={})=>({beforeRequest:W(e,t,"beforeRequest"),beforeRetry:W(e,t,"beforeRetry"),afterResponse:W(e,t,"afterResponse"),beforeError:W(e,t,"beforeError")}),K=(...e)=>{let t={},r={},i={};for(let s of e)if(Array.isArray(s))Array.isArray(t)||(t=[]),t=[...t,...s];else if(F(s)){for(let[e,r]of Object.entries(s))F(r)&&e in t&&(r=K(t[e],r)),t={...t,[e]:r};F(s.hooks)&&(i=z(i,s.hooks),t.hooks=i),F(s.headers)&&(r=H(r,s.headers),t.headers=r)}return t},V=e=>I.includes(e)?e.toUpperCase():e,J={limit:2,methods:["get","put","head","delete","options","trace"],statusCodes:[408,413,429,500,502,503,504],afterStatusCodes:[413,429,503],maxRetryAfter:Number.POSITIVE_INFINITY,backoffLimit:Number.POSITIVE_INFINITY,delay:e=>.3*2**(e-1)*1e3},Y=(e={})=>{if("number"==typeof e)return{...J,limit:e};if(e.methods&&!Array.isArray(e.methods))throw Error("retry.methods must be an array");if(e.statusCodes&&!Array.isArray(e.statusCodes))throw Error("retry.statusCodes must be an array");return{...J,...e}};var Z=r(86964).Promise;async function X(e,t,r,i){return new Z((s,n)=>{let o=setTimeout(()=>{r&&r.abort(),n(new A(e))},i.timeout);i.fetch(e,t).then(s).catch(n).then(()=>{clearTimeout(o)})})}var Q=r(86964).Promise;async function ee(e,{signal:t}){return new Q((r,i)=>{function s(){clearTimeout(n),i(t.reason)}t&&(t.throwIfAborted(),t.addEventListener("abort",s,{once:!0}));let n=setTimeout(()=>{t?.removeEventListener("abort",s),r()},e)})}let et=(e,t)=>{let r={};for(let i in t)i in O||i in N||i in e||(r[i]=t[i]);return r};var er=r(86964).Promise;class ei{static create(e,t){let r=new ei(e,t),i=async()=>{if("number"==typeof r._options.timeout&&r._options.timeout>0x7fffffff)throw RangeError("The `timeout` option cannot be greater than 2147483647");await er.resolve();let e=await r._fetch();for(let t of r._options.hooks.afterResponse){let i=await t(r.request,r._options,r._decorateResponse(e.clone()));i instanceof globalThis.Response&&(e=i)}if(r._decorateResponse(e),!e.ok&&r._options.throwHttpErrors){let t=new C(e,r.request,r._options);for(let e of r._options.hooks.beforeError)t=await e(t);throw t}if(r.request.bodyUsed||await r.request.body?.cancel(),r._options.onDownloadProgress){if("function"!=typeof r._options.onDownloadProgress)throw TypeError("The `onDownloadProgress` option must be a function");if(!k)throw Error("Streams are not supported in your environment. `ReadableStream` is missing.");return G(e.clone(),r._options.onDownloadProgress)}return e},s=r._options.retry.methods.includes(r.request.method.toLowerCase())?r._retry(i):i();for(let[e,i]of Object.entries(D))s[e]=async()=>{r.request.headers.set("accept",r.request.headers.get("accept")||i);let n=await s;if("json"===e){if(204===n.status||0===(await n.clone().arrayBuffer()).byteLength)return"";if(t.parseJson)return t.parseJson(await n.text())}return n[e]()};return s}request;abortController;_retryCount=0;_input;_options;constructor(e,t={}){if(this._input=e,this._options={...t,headers:H(this._input.headers,t.headers),hooks:z({beforeRequest:[],beforeRetry:[],beforeError:[],afterResponse:[]},t.hooks),method:V(t.method??this._input.method??"GET"),prefixUrl:String(t.prefixUrl||""),retry:Y(t.retry),throwHttpErrors:!1!==t.throwHttpErrors,timeout:t.timeout??1e4,fetch:t.fetch??globalThis.fetch.bind(globalThis)},"string"!=typeof this._input&&!(this._input instanceof URL||this._input instanceof globalThis.Request))throw TypeError("`input` must be a string, URL, or Request");if(this._options.prefixUrl&&"string"==typeof this._input){if(this._input.startsWith("/"))throw Error("`input` must not begin with a slash when using `prefixUrl`");this._options.prefixUrl.endsWith("/")||(this._options.prefixUrl+="/"),this._input=this._options.prefixUrl+this._input}if(x){let e=this._options.signal??this._input.signal;this.abortController=new globalThis.AbortController,this._options.signal=e?AbortSignal.any([e,this.abortController.signal]):this.abortController.signal}if(P&&(this._options.duplex="half"),void 0!==this._options.json&&(this._options.body=this._options.stringifyJson?.(this._options.json)??JSON.stringify(this._options.json),this._options.headers.set("content-type",this._options.headers.get("content-type")??"application/json")),this.request=new globalThis.Request(this._input,this._options),this._options.searchParams){let e="string"==typeof this._options.searchParams?this._options.searchParams.replace(/^\?/,""):new URLSearchParams(this._options.searchParams).toString(),t=this.request.url.replace(/(?:\?.*?)?(?=#|$)/,"?"+e);(j&&this._options.body instanceof globalThis.FormData||this._options.body instanceof URLSearchParams)&&!(this._options.headers&&this._options.headers["content-type"])&&this.request.headers.delete("content-type"),this.request=new globalThis.Request(new globalThis.Request(t,{...this.request}),this._options)}if(this._options.onUploadProgress){if("function"!=typeof this._options.onUploadProgress)throw TypeError("The `onUploadProgress` option must be a function");if(!P)throw Error("Request streams are not supported in your environment. The `duplex` option for `Request` is not available.");this.request.body&&(this.request=M(this.request,this._options.onUploadProgress))}}_calculateRetryDelay(e){if(this._retryCount++,this._retryCount>this._options.retry.limit||e instanceof A)throw e;if(e instanceof C){if(!this._options.retry.statusCodes.includes(e.response.status))throw e;let t=e.response.headers.get("Retry-After")??e.response.headers.get("RateLimit-Reset")??e.response.headers.get("X-RateLimit-Reset")??e.response.headers.get("X-Rate-Limit-Reset");if(t&&this._options.retry.afterStatusCodes.includes(e.response.status)){let e=1e3*Number(t);Number.isNaN(e)?e=Date.parse(t)-Date.now():e>=Date.parse("2024-01-01")&&(e-=Date.now());let r=this._options.retry.maxRetryAfter??e;return e<r?e:r}if(413===e.response.status)throw e}let t=this._options.retry.delay(this._retryCount);return Math.min(this._options.retry.backoffLimit,t)}_decorateResponse(e){return this._options.parseJson&&(e.json=async()=>this._options.parseJson(await e.text())),e}async _retry(e){try{return await e()}catch(r){let t=Math.min(this._calculateRetryDelay(r),0x7fffffff);if(this._retryCount<1)throw r;for(let e of(await ee(t,{signal:this._options.signal}),this._options.hooks.beforeRetry))if(await e({request:this.request,options:this._options,error:r,retryCount:this._retryCount})===q)return;return this._retry(e)}}async _fetch(){for(let e of this._options.hooks.beforeRequest){let t=await e(this.request,this._options);if(t instanceof Request){this.request=t;break}if(t instanceof Response)return t}let e=et(this.request,this._options),t=this.request;return(this.request=t.clone(),!1===this._options.timeout)?this._options.fetch(t,e):X(t,e,this.abortController,this._options)}}/*! MIT License © Sindre Sorhus */let es=e=>{let t=(t,r)=>ei.create(t,B(e,r));for(let r of I)t[r]=(t,i)=>ei.create(t,B(e,i,{method:r}));return t.create=e=>es(B(e)),t.extend=t=>("function"==typeof t&&(t=t(e??{})),es(B(e,t))),t.stop=q,t},en=es();var eo=r(86964).Promise;let ea={gdpr:{country:"GB",region:"ENG",city:"London",postalCode:"W1B"},ccpa:{country:"US",region:"CA",city:"San Francisco",postalCode:"94107"},none:{country:"US",region:"IL",city:"Chicago",postalCode:"60007"}},el="aditude_geo";if(h(el)){let t=h(el);ea[t]&&(e=ea[t])}let ed=!1,eu=new eo(e=>{i=e});async function eh(r="https://geo-location.prebid.cloud/v1/geo"){if(e)return e;if(t||ed)return eu;let s=window.localStorage.getItem("cwgl");if(s){let e=window.localStorage.getItem("cwglt");(h("aditude_nocache")||!e||Date.now()-parseInt(e)>36e5)&&(s=!1)}if(s)t=JSON.parse(s),i(t);else{ed=!0;try{let e=await en.get(r||"https://geo-location.prebid.cloud/v1/geo",{timeout:3e3}).json();window.localStorage.setItem("cwgl",JSON.stringify(e)),window.localStorage.setItem("cwglt",JSON.stringify(Date.now())),t=e,i(t)}catch(e){v().error(e),i(t)}}return eu}let ec=u("tude_dev")||h("tude_dev")||c("tude_dev");if(ec){let e=new URL(document.currentScript.src);if(ec&&e.pathname.match("prebid-load.js")&&!e.searchParams.has("testing")){let t=e.pathname,r=document.createElement("script");throw r.src=`${"stage"===ec?"https://d3g98hgqjqzwq5.cloudfront.net":"https://localhost:9000/static"}${t}?testing`.replace("/static/static/","/static/"),r.async=!1,document.currentScript.after(r),Error("prebid-load.js -- bailing to load script from another environment")}}let ep=document.currentScript;if(null==ep?void 0:ep.src){let e=new URL(ep.src);if(null==e?void 0:e.pathname){if(r.g.__tudeLoadedScripts=r.g.__tudeLoadedScripts||[],r.g.__tudeLoadedScripts.includes(e.pathname))throw Error(`attempted to load file multiple times: ${ep.src}`);r.g.__tudeLoadedScripts.push(e.pathname)}}let ef=(e="",t="")=>{let r="https://dn0qt3r0xannq.cloudfront.net";return(-1!==e.indexOf("vendor/")||-1!==t.indexOf("vendor/"))&&(r="https://dn0qt3r0xannq.cloudfront.net"),r+e+t},eg=(e,t,r=!1,i=!1,s=[])=>{let n=document.createElement("script");r?n.async=!0:n.async=!1,i&&(n.defer=!0),s.forEach(e=>{n.setAttribute("data-"+e.key,e.value)}),n.src=e,document[t].appendChild(n)};var em=(e,t=!1)=>{let r=document.createElement("link");t&&(r.id=t),r.rel="stylesheet",r.type="text/css",r.href=e,r.media="all",document.getElementsByTagName("head")[0].appendChild(r)},eb=r(86964).Promise;function ey(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}let ew='"1.4.0"'.replace(/"/g,""),ev="Loader";v(ev).setLabel("Loader","red");var e_=class{setForcedModules(e=[]){this.forcedModules=e}appendForcedModules(e=[]){this.forcedModules=[...this.forcedModules,...e]}forceEnablePrebidFork(){this._forceEnablePrebidFork=!0}forcePrebidVersion(e){this._forcePrebidVersion=e}getLibraryLocation(){return this.libraryFolder?this.publisherKey+"/"+this.libraryFolder:this.publisherKey}setLibraryFolder(e){this.libraryFolder=e}setPrebidBuild(e){this.dynamicLibrary=e,h("prebid_version_override")&&(this.dynamicLibrary.version=h("prebid_version_override"))}setDynamicLibrary(e,t){this.dynamicLibrary={version:e,modules:t}}setLoadRemoteConfig(e=!0){this.loadRemoteConfig=e}disableAnalytics(){this.checkForAnalytics=!1}enableAnalyticsExperiment(){this.checkForAnalytics=!0}disableLibrary(){this.hasLibrary=!1}disable(){this._disabled=!0,v(ev).advancedLog("Wrapper disabled"),"function"!=typeof window.tudeDisabled&&(window.tudeDisabled=function(){return!0})}setGeo(e=!0){this.geo=e}setGeoEndpoint(e="https://geo-location.prebid.cloud/v1/geo"){v(ev).advancedLog("Endpoint set: ",e),this.geoEndpoint=e}setGeoTimeout(e=500){this.geoTimeout=e}setWhitelistDomains(e){this.whitelistDomains=e}isDomainWhitelisted(){if(!this.whitelistDomains||0===this.whitelistDomains.length)return!0;let e=window.location.hostname.replace(/^www\./,"");return this.whitelistDomains.some(t=>t.replace(/^www\./,"")===e)}async getGeo(){let e=await eh(this.geoEndpoint);r.g._tudeGeo=e,v(ev).advancedLog("Global Geo Set",e)}setGlobalPbjsName(e){this.globalPbjsName=e,r.g._tudePbjsGlobal=this.globalPbjsName}setPublisherKey(e){this.publisherKey=e}setResourceVersion(e){this.version=e}setWrapper(e){this.wrapper=e}addPreset(e){e.forEach(e=>{this.addResource(e)})}addResource(e){this.resources[e.name]=e}getCurrentWrapperUrl(e,t=!0){let r="";return this.version&&t&&(r="?v="+this.version),ef(`/${this.publisherKey}/${this.wrapper}`,`/${e}`)+r}createCloudResource(e,t,r,i,s){let n="";this.version&&(n="?v="+this.version);let o={name:e,appendTo:a.Head,async:i,trigger:s,url:ef(`/${t}`,`/${r}`)+n};this.addResource(o)}async start(){if(v(ev).advancedLog("Loader starting at: ",Math.floor(performance.now()).toString()),this._disabled)return void v(ev).advancedLog("Loader disabled, skipping start");if(!this.isDomainWhitelisted())return void v(ev).advancedLog("Domain not whitelisted, skipping loader");if(await this.maybeLoadRemoteConfig(),this.hasLibrary&&this.addLibrary(),this.addWrapper(),Object.keys(this.resources).reverse().forEach(e=>{try{let t=this.resources[e];if((!t.type||"js"===t.type)&&!document.querySelector(`link[rel="preload"][as="script"][href="${t.url}"]`)){let e=document.createElement("link");e.rel="preload",e.as="script",e.href=t.url,document.head&&document.head.appendChild(e)}}catch(e){}}),this.geo){v(ev).advancedLog("Fetching geo from loader with timeout: ",this.geoTimeout);let e=this.getGeo(),t=new eb(e=>setTimeout(e,this.geoTimeout));await eb.race([e,t])}Object.keys(this.resources).forEach(e=>{let t=this.resources[e];(void 0===t.trigger||!t.trigger||t.trigger())&&(void 0===t.type||"js"===t.type?o(this._createUrl(t.url),t.appendTo,t.async||!1,t.defer||!1,t.dataAttributes||[],t.attributes||[]):em(this._createUrl(t.url),t.id))}),v(ev).advancedLog("Loader finished at: ",Math.floor(performance.now()).toString())}maybeAddDynamicLibrary(){if(this.dynamicLibrary){let{version:e,modules:t,fork:r=!1}=this.dynamicLibrary,i=this.globalPbjsName,s=new URL(`https://edge.aditude.io/prebid/${this._forcePrebidVersion||e}.js`);"pbjs"!==i&&s.searchParams.set("var",i),(r||this._forceEnablePrebidFork)&&s.searchParams.set("fork","1");let n=[...new Set([...t,...this.forcedModules,...this.mandatoryModules])];n.includes("aditude")&&S&&s.searchParams.set("v",S),n.forEach((e,t)=>{"cpmstarBidAdapter"===e&&(n[t]="cpmstarCustomBidAdapter")}),[].forEach(e=>{let t=n.indexOf(e);t>-1&&n.splice(t,1)});let o=window.btoa(JSON.stringify(n.sort()));s.searchParams.set("modules",o);let l={name:"library",appendTo:a.Head,async:!0,trigger:()=>(!window[i]||!window[i].getConfig||"function"!=typeof window[i].getConfig)&&!window[i+"LibraryLoaded"]&&(window[i+"LibraryLoaded"]=!0,!0),url:s.toString()};return this.addResource(l),!0}return!1}setupLoaderFromConfig(){var e,t,r;this.dynamicLibrary=null==(e=window.ADITUDE_WRAPPER_CONFIG)?void 0:e.PBJS_BUILD,this.addPreset((null==(t=window.ADITUDE_WRAPPER_CONFIG)?void 0:t.THIRD_PARTY_SCRIPTS)||[]);let i=null==(r=window.ADITUDE_WRAPPER_CONFIG)?void 0:r.PREBID_GLOBAL;"string"==typeof i&&""!==i.trim()&&this.setGlobalPbjsName(i.trim())}async maybeLoadRemoteConfig(){return"object"==typeof window.ADITUDE_WRAPPER_CONFIG?(this.setupLoaderFromConfig(),!0):!!this.loadRemoteConfig}addLibrary(){if(this.maybeAddDynamicLibrary())return;let e=this.getLibraryLocation();this.createCloudResource("library",e,"prebid-library.js",!0,()=>(!window[this.globalPbjsName]||!window[this.globalPbjsName].getConfig||"function"!=typeof window[this.globalPbjsName].getConfig)&&!window[this.globalPbjsName+"LibraryLoaded"]&&(window[this.globalPbjsName+"LibraryLoaded"]=!0,!0))}addWrapper(){this.createCloudResource("wrapper",this.publisherKey+"/"+this.wrapper,"prebid-wrapper.js",!1)}_createUrl(e){return e}constructor(e,t=ew){ey(this,"resources",{}),ey(this,"globalPbjsName","pbjs"),ey(this,"libraryFolder",void 0),ey(this,"dynamicLibrary",void 0),ey(this,"loadRemoteConfig",!1),ey(this,"publisherKey",void 0),ey(this,"hasLibrary",!0),ey(this,"version",'"1.4.0"'),ey(this,"wrapper",""),ey(this,"checkForAnalytics",!0),ey(this,"geo",!0),ey(this,"geoEndpoint","https://geo-location.prebid.cloud/v1/geo"),ey(this,"geoTimeout",500),ey(this,"whitelistDomains",[]),ey(this,"_forceEnablePrebidFork",!1),ey(this,"_forcePrebidVersion",!1),ey(this,"_disabled",!1),ey(this,"forcedModules",["33acrossIdSystem","criteoIdSystem","gptPreAuction","id5IdSystem","pubProvidedIdSystem","sharedIdSystem","unifiedIdSystem","consentManagement","consentManagementGpp","gdprEnforcement"]),ey(this,"mandatoryModules",["aditude"]),this.publisherKey=e,this.version=t}};let eE={name:"gpt",appendTo:a.Head,async:!0,url:"https://securepubads.g.doubleclick.net/tag/js/gpt.js",external:!0,trigger:()=>!window.googletag||!window.googletag.apiReady},eR=30,eT=e=>"cw-test-"+e,eL=e=>d.get(eT(e))||!1,eS=(e,t,r=eR)=>{d.set(eT(e),t,{expires:r})},eC=(e,t)=>{let r=t.filter(t=>t.name===e);return r.length>0&&r[0]},eA=e=>{let t=Math.floor(1e3*Math.random()+1),r=0,i=0,s=[...e].sort((e,t)=>e.percentage>t.percentage?1:e.percentage<t.percentage?-1:0);for(;i<s.length;i++){let e=s[i],n=e.percentage/100*1e3;if(t<=r+n)return e;r+=n+1}};function eP(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class ex{constructor(e,t,r){eP(this,"name",void 0),eP(this,"value",void 0),eP(this,"percentage",void 0),this.name=e,this.value=t,this.percentage=r}}let ek=(e,t,r=!1)=>({experiment:e,fromCookie:r,trackingId:e+"@"+t.name,variant:t.name,value:t.value});var ej=class{variant(e){return this.variants.push(new ex(e.name,e.value,e.percentage)),this}pick(e=30){if(this.selectedVariant&&this.pickResponse)return this.pickResponse;let t=eL(this.name);if(t){let e=eC(t,this.variants);if(e)return this.selectedVariant=e,this.pickResponse=ek(this.name,e,!0),this.pickResponse}let r=eA(this.variants);if(r)return this.selectedVariant=r,this.pickResponse=ek(this.name,r,!1),eS(this.name,r.name,e),this.pickResponse;v("experiment").error(`Failed to pick a variant for experiment '${this.name}'`)}constructor(e){eP(this,"name",void 0),eP(this,"selectedVariant",void 0),eP(this,"variants",void 0),eP(this,"pickResponse",void 0),this.name=e,this.selectedVariant=!1,this.variants=[]}},eI={createExperiment(e){return new ej(e)}};let eD=new(function(){let e=0;function t(e){let t=[],r=0,i=0;this.push=function(s){r-i>=e&&++i>=e&&(i=0,r=e-1),t[r%e]=s,r++},this.asArray=function(){let s=t.slice(i,Math.min(r,e)),n=t.slice(0,Math.max(r-e,0));return s.concat(n)},this.list=t}function r(t,r){let i=r;for(let r=0;r<t.length;r++){let s=t[r],n=i.r;n[s]||(n[s]={w:s,r:{},i:e++}),i=n[s]}return i}function i(e,t,r){let i;return r[e]?i=r[e]:(i=function(e,t){let r=[[t,0]],i={},s=[];for(;r.length;){let t=r.shift(),n=t[0],o=t[1],a=n.r,l=e[o];if(void 0===l&&n.fn&&!i[n.i]?(i[n.i]=1,s.push(n.fn)):a[l]&&r.push([a[l],o+1]),a["#"])for(let t=o;t<=e.length;t++)r.push([a["#"],t]);l&&a["*"]&&r.push([a["*"],o+1])}return s}(e.split("."),t),r[e]=i),i}let s=function(){let s={w:"",r:{},i:e++},n={},o=new t(1);function a(e,t){let i=r(e.split("."),s),o=i.fn||[];return o.push(t),i.fn=o,n={},function(){let e=o.indexOf(t);e>-1&&o.splice(e,1)}}function l(e,t){let r=Date.now();o.push([e,r]);let a=i(e,s,n),l={topic:e};for(let e=0;e<a.length;e++){let r=a[e];for(let e=0;e<r.length;e++)try{r[e](t,l)}catch(e){v("event-bus").error("(error in callback)",e)}}}this.emit=l,this.on=a,this.history=function(t){let s={w:"",r:{},i:e++};r(t.split("."),s).fn=1;let n=[],a={},l=o.asArray();for(let e=0;e<l.length;e++){let t=l[e];i(t[0],s,a).length&&n.push(t)}return n},this.publish=l,this.subscribe=a};return s.Ring=t,s}()),e$=r.g._tudePbjsGlobal||"pbjs",eq=new class{sub(e,t){e in this.filters||(this.filters[e]=[]),this.filters[e].push(t)}apply(e,t,r){if(!this.filters[e])return r(t);for(let r of this.filters[e])t=r(t);return r(t)}constructor(){var e,t;t={},(e="filters")in this?Object.defineProperty(this,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):this[e]=t}};function eN(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}let eO={};eq.sub("wrapperConfigOnInit",e=>(eO=e.AMAZON_HASH_MAP||{},e));let eU=function(e=e$){return e=e.length>0?e:e$,window[e]=window[e]||{cmd:[],que:[]},window[e].cmd=window[e].cmd||[],window[e].que=window[e].que||[],window[e]}(),eG=v("GooglePublisherTag").setLabel("GooglePublisherTag","#039be5"),eM=new class{setConfig(e){this.config=e}init(){let{enableSingleRequest:e,setForceSafeFrame:t,setCentering:r,disableInitialLoad:i,enableLazyLoad:s,collapseEmptyDivs:n}=this.config;if(this.googleTagInitialized)return;eG.log("Initialized",this.config),this.googleTagInitialized=!0;let o=this.getGlobal();this.push(()=>{n&&o.pubads().collapseEmptyDivs(),e&&o.pubads().enableSingleRequest(),t&&o.pubads().setForceSafeFrame(!0),r&&o.pubads().setCentering(!0),i&&o.pubads().disableInitialLoad(),s&&o.pubads().enableLazyLoad(s),o.enableServices()})}addAllEventListeners(){this.eventListenersAdded||(eG.log("Adding all event listeners"),this.eventListenersAdded=!0,this.push(()=>{this.addEventListener("slotRenderEnded",e=>{var t,r,i,s,n;let o=Array.isArray(null==e?void 0:e.size)&&0===e.size[0]&&0===e.size[1],a=e.slot,l=null==a?void 0:a.getSlotElementId(),d=document.getElementById(l),u=null==a?void 0:a.getTargetingMap(),h=a.getSizes().filter(e=>e.getWidth&&e.getHeight).map(e=>[e.getWidth(),e.getHeight()]),c=function(e){try{return eU.adUnits.find(t=>t.code===e)}catch(e){}return!1}(l),p=String((null==a||null==(t=a.getTargeting("hb_pb"))?void 0:t[0])||"").trim(),f=!!(p&&Number(p)),g=!!(null==a||null==(r=a.getTargeting("amziid"))?void 0:r[0]),m=null==a||null==(i=a.getTargeting("hb_bidder"))?void 0:i[0],b=null==a?void 0:a.getAdUnitPath(),y=null==e?void 0:e.responseIdentifier,w=window.console.warn;window.console.warn=()=>{};let v=(null==a?void 0:a.getResponseInformation())?a.getHtml():"";window.console.warn=w;let _=v.includes("apstag.renderImp"),E=!e.isEmpty,R=a.getResponseInformation(),T=e.campaignId,L=e.lineItemId,S=!!v.match(/(?:prebid-universal|(?:ucTag|pbjs)\.renderAd|window\.pbRender)/),C=[...v.matchAll(/<!--\s*tude_[a-z_]+(?::[0-9]+s)?\s*-->/g)].map(e=>e[0].replace(/<!--\s*|\s*-->/g,"")),A=null==u||null==(s=u.amzniid)?void 0:s[0],P=null==u||null==(n=u.amznbid)?void 0:n[0],x=eO[null==P?void 0:P.replace(/^(v_|o_)/,"")],k=[];x&&k.push(x),isNaN(Number(p))||k.push(p);let j=Math.max(...k),I={aditudeComments:C,amazonBid:x,amzniid:A,isPrebidWin:S,isNative:o,slot:a,adSlot:d,adUnitPath:b,divId:l,prebidUnit:c,hasBid:g||f,hasPrebidBid:f,hbBidder:m,prebidBid:Number(p),targetingMap:u,highBid:j,sizes:h,isAmazonWin:_,filled:E,info:R,orderId:T,lineItemId:L,responseIdentifier:y};eD.emit("gpt.slotRenderEnded",I),eD.emit("gpt.slotRenderEnded.${divId}",I)})}))}setPrivacySettings(e){let t=this.getGlobal();this.push(()=>{t.pubads().setPrivacySettings(e)})}setPublisherProvidedId(e){let t=this.getGlobal();this.push(()=>{t.pubads().setPublisherProvidedId(e)})}getGlobal(){return window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[],window.googletag}pubadsLoaded(){return"function"==typeof this.getGlobal().pubads}destroySlots(e){let t=this.getGlobal();this.push(()=>{eD.emit("gpt.destroySlots",{divIds:null==e?void 0:e.map(e=>e.getSlotElementId()),destroyAll:!e.length,slots:e}),t.destroySlots(e)})}destroySlotsByDivIds(e){let t=this.getGlobal();this.push(()=>{t.destroySlots(this.getSlotListByDivIds(e))})}destroyAllSlots(){let e=this.getGlobal();this.push(()=>{e.destroySlots()})}push(e){this.getGlobal().cmd.push(e)}getAllSlots(){return this.pubadsLoaded()?this.getGlobal().pubads().getSlots():[]}getAllSlotDivIds(){return this.getAllSlots().map(e=>e.getSlotElementId())}getSlotByDivId(e){return this.getAllSlots().find(t=>t.getSlotElementId()===e)}getSlotListByDivIds(e){return this.getAllSlots().filter(t=>e.includes(t.getSlotElementId()))}setSlotTargeting(e,t){Object.keys(t).forEach(r=>{e.setTargeting(r,t[r])})}refreshDivIds(e){if(!e.length)return!1;let t=this.getGlobal(),r=this.getSlotListByDivIds(e);return!!r.length&&(this.push(()=>{t.pubads().refresh(r)}),!0)}defineGptSlot({adUnit:e,sizes:t,divId:r}){eG.log("Defining slot",{adUnit:e,sizes:t,divId:r});let i=this.getGlobal().defineSlot(e,t,r);if(i)return i.addService(googletag.pubads()),i}defineOutOfPageSlot(e,t){let r=this.getGlobal().defineOutOfPageSlot(e,t);if(r)return r.addService(googletag.pubads()),r}addEventListener(e,t){let r=this.getGlobal();this.push(()=>{r.pubads().addEventListener(e,t)})}setTargeting(e){let t=this.getGlobal();this.push(()=>{Object.keys(e).forEach(r=>{let i=[].concat(e[r]).map(String);t.pubads().setTargeting(r,i)})})}clearTargeting(e){let t=this.getGlobal();this.push(()=>{t.pubads().clearTargeting(e)})}getTargeting(e){return this.getGlobal().pubads().getTargeting(e)}refresh(e){let t=this.getGlobal();this.push(()=>{t.pubads().refresh(e)})}setPageUrl(e){let t=this.getGlobal();this.push(()=>{t.pubads().set("page_url",e)})}updateCorrelator(){let e=this.getGlobal();this.push(()=>{e.pubads().updateCorrelator()})}constructor(){eN(this,"googleTagInitialized",!1),eN(this,"eventListenersAdded",!1),eN(this,"config",void 0)}};function eF(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var eB=class{setState(e){let t=[];for(let r in e)r in this.props&&(t.push(r),this.props[r]=e[r]);this.isReady||(this.isReady=!0,this.triggerReadyCallbacks()),this.triggerStateChangeCallbacks(t)}onStateChange(e,t){this.onStateChangeCallbacks.push({cb:e,depProps:t})}triggerStateChangeCallbacks(e){this.onStateChangeCallbacks.length<1||this.onStateChangeCallbacks.filter(t=>t.depProps.some(t=>e.includes(t))).forEach(e=>{e.cb(this.props)})}onReady(e){this.isReady?e():this.onReadyCallbacks.push(e.bind(this))}triggerReadyCallbacks(){this.onReadyCallbacks.length<1||(this.onReadyCallbacks.forEach(e=>e()),this.onReadyCallbacks=[])}constructor(e){eF(this,"isReady",!1),eF(this,"onStateChangeCallbacks",[]),eF(this,"onReadyCallbacks",[]),eF(this,"props",void 0),this.props=e}};let eH=["param1","param2","param3","param4","param5","param6","param7","param8","param9","param10"],eW=new class extends eB{getTargeting(){return this.props.targeting}setTargeting(e){this.setState({targeting:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},i=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),i.forEach(function(t){var i;i=r[t],t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i})}return e}({},this.props.targeting,e)})}}({targeting:{}});eW.onStateChange(({targeting:e})=>{for(let t in eD.emit("pageContext.setTargeting",e),eM.setTargeting(e),e)eD.emit(`pageContext.setTargeting.${t}`,{key:t,value:e[t]}),eH.includes(t)&&E.setCustomParams({[t]:e[t]})},["targeting"]);var ez=r(86964).Promise;function eK(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class eV{static get(){return this.singleton||(this.singleton=new eV),this.singleton}resolveName(e){let t=this.aliasToKey.get(e);return t||(this.results.has(e)?e:void 0)}createHandle(e){let t=this.results.get(e);return{variantName:()=>t.variant,is:e=>t.variant===e,value:()=>t.value}}setResult(e,t,r=[]){let i=this.results.get(e);for(let s of(i?i.variant!==t.variant&&v().error(`ExperimentManager.setResult conflict for "${e}"`,Error("Conflicting experiment result")):this.results.set(e,t),this.aliasToKey.set(e,e),r))this.aliasToKey.set(s,e);let s=t=>{let r=this.waiters.get(t);if(!r||0===r.length)return;this.waiters.delete(t);let i=this.createHandle(e);for(let e of r){e.timer&&clearTimeout(e.timer);try{e.resolve(i)}catch(e){v().error("ExperimentManager waiter resolve error",e)}}};for(let t of(s(e),r))s(t);return this.createHandle(e)}link(e,t={throwIfMissing:!0}){let r=this.resolveName(e);if(!r){!1!==t.throwIfMissing&&v().error(`ExperimentManager.link missing result for "${e}"`,Error("Experiment not resolved"));return}return this.createHandle(r)}asyncLink(e,t){var r;let i=this.resolveName(e);if(i)return ez.resolve(this.createHandle(i));let s=null!=(r=null==t?void 0:t.timeoutMs)?r:2e4;return new ez((t,r)=>{var i;let n=null!=(i=this.waiters.get(e))?i:[];this.waiters.set(e,n);let o={resolve:t,reject:r,timer:void 0};n.push(o),o.timer=setTimeout(()=>{let t=this.waiters.get(e);t&&this.waiters.set(e,t.filter(e=>e!==o));let i=Error(`ExperimentManager.asyncLink timeout for "${e}" after ${s}ms`);v().error("Experiment link timeout",i),r(i)},s)})}has(e){return!!this.resolveName(e)}reset(e){if(!e){this.results.clear(),this.aliasToKey.clear(),this.waiters.clear();return}let t=this.resolveName(e);if(t){for(let[e,r]of(this.results.delete(t),Array.from(this.aliasToKey.entries())))r===t&&this.aliasToKey.delete(e);let r=this.waiters.get(e);if(r){this.waiters.delete(e);let t=Error(`ExperimentManager.reset while waiters pending for "${e}"`);for(let e of r){e.timer&&clearTimeout(e.timer);try{e.reject(t)}catch(e){v().error("ExperimentManager waiter reject error",e)}}}}}constructor(){eK(this,"results",new Map),eK(this,"aliasToKey",new Map),eK(this,"waiters",new Map)}}eK(eV,"singleton",void 0);let eJ=eV.get(),eY=["param1","param2","param3","param4","param5","param6","param7","param8","param9","param10","param11","param12","param13","param14","param15","abtest1","abtest2","abtest3","abtest4","abtest5"],eZ=v("quick-test").setLabel("A/B Quick Test");async function eX(e){let t=`https://htlbid.com/stage/v3/${e}/bridge-htlbid.js`,r=`https://htlbid.com/v3/${e}/bridge-htlbid.js`;if((await fetch(t,{method:"HEAD"})).ok)return t;if((await fetch(r,{method:"HEAD"})).ok)return r;throw Error("Error fetching Bridge URL: Could not find Bridge deployed in either stage or prod.")}async function eQ({loader:e,website:t,onPercent:r=100,tracking:i="htl",insights:s="param1"}){if(function({name:e,date:t,condition:r=!0,tracking:i,variants:s,insights:n=!1,trackNonCondition:o=!1}){let a,l=`${t}_${e}`,d=`${t}_${e}_${s.map(e=>e.percent).join("_")}`;if(!r&&!o)return void v().log(`Experiment "${e}" is not conditionally enabled, skipping test and tracking`);if(!Array.isArray(s)||0===s.length)return void eZ.error(`Experiment "${e}" must have at least one variant.`);let u=0,h=new Set,c=0;for(let t of s){if("number"!=typeof t.percent||t.percent<0||t.percent>100)return void eZ.error(`Variant "${t.name}" has an invalid percent value: ${t.percent}. Must be a number between 0 and 100.`);if(h.has(t.name))return void eZ.error(`Duplicate variant name "${t.name}" found in experiment "${e}". Variant names must be unique.`);!0===t.control&&(c++,a=t.name),h.add(t.name),u+=t.percent}let p=1!==c;if(0===c&&eZ.error(`Experiment "${e}" must have exactly one variant with control: true. Found none.`),c>1&&eZ.error(`Experiment "${e}" must have exactly one variant with control: true. Found ${c}.`),100!==u)return void eZ.error(`Total percentage for experiment "${e}" is ${u}, but it must equal 100.`);if(!1!==n&&!eY.includes(n))return void eZ.error(`Invalid insights parameter "${n}" provided for experiment "${e}".`);let f=eI.createExperiment(d);s.forEach(e=>{f.variant({name:e.name,value:e.value,percentage:e.percent})});let g=f.pick();try{let t=[e,d,l];eJ.setResult(d,{variant:g.variant,value:g.value},t)}catch(e){v().error("ExperimentManager.setResult failed",e)}if(n){let e=1===c&&g.variant===a,t=s.find(e=>e.name===g.variant),r=null==t?void 0:t.percent;L({[n]:`${l}_${p?"error":e?"control":"test"}_${g.variant.replace("_","-")}_${r}`})}return(eZ.log(e,g),i&&eW.setTargeting({[`tude_${i}`]:g.variant}),!r&&o)?void v().log(`Experiment "${e}" is not conditionally enabled, still tracking variant ${g.variant} for ${n} / ${i}`):g.value}({date:"00000000",name:"htlbid-tude",tracking:i,insights:s,variants:[{name:"htl",value:!0,percent:r,control:!1},{name:"tude",value:!1,percent:100-r,control:!0}]}))try{let e=await eX(t);eg(e,"head",!0)}catch(t){v().error(t),e.start()}else e.start()}window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[],window.googletag.cmd.push(()=>{window.googletag.pubads().setTargeting("htlbidid","cw")});let e0=new e_("mydramalist-Ye4kEWLE9Z",!1);e0.addPreset([eE]),e0.setLibraryFolder("mydramalist.com"),e0.setWrapper("mydramalist.com"),e0.setLoadRemoteConfig(),eQ({loader:e0,website:"mydramalist.com",onPercent:0})}()}();